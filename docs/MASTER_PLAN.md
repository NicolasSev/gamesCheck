# –ú–∞—Å—Ç–µ—Ä-–ø–ª–∞–Ω –ø—Ä–æ–µ–∫—Ç–∞ gamesCheck

> **–ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º**

**üìä –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [–î–∏–∞–≥—Ä–∞–º–º–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](DATA_DIAGRAM.md) - –ø–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ Core Data, CloudKit, flow —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**–ò—Å—Ç–æ—Ä–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:**
- 2026-02-07 (19:15): üìä –°–æ–∑–¥–∞–Ω–∞ –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –¥–∞–Ω–Ω—ã—Ö - —Å—Ö–µ–º–∞ –ë–î, CloudKit, flow —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏, –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö
- 2026-02-07 (19:10): üõ°Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô FIX: –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–∞—Ç–∏—Ä–∞–Ω–∏—è playerProfile + —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è PlayerProfile
- 2026-02-07 (01:30): üîÑ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–ó–ú–ï–ù–ï–ù–ò–ï: CloudKit = –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (Source of Truth)
- 2026-02-07 (01:00): üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø–æ—Å–ª–µ –æ–¥–æ–±—Ä–µ–Ω–∏—è –∑–∞—è–≤–∫–∏ - –¥–∞–Ω–Ω—ã–µ —Ç–µ–ø–µ—Ä—å –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –≤ CloudKit
- 2026-02-07 (00:40): üö® –ö–†–ò–¢–ò–ß–ù–û: –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω PlayerClaim –∏–∑ Private DB –≤ Public DB –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∑–∞—è–≤–æ–∫
- 2026-02-07 (00:30): üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è PlayerClaim - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ CloudKit
- 2026-02-07 (00:20): üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ Limit Exceeded - –∏–∑–º–µ–Ω–µ–Ω limit —Å 1000 –Ω–∞ 400
- 2026-02-06 (23:45): üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è User: Private DB ‚Üí Public DB –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email
- 2026-02-06 (23:00): üêõ Hotfix —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - User —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ CloudKit, —É—Å–ø–µ—à–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, email –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- 2026-02-06 (14:30): ‚úÖ –£–ª—É—á—à–µ–Ω –≤—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞ - –º—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏–º–µ–Ω–∏
- 2026-02-06: ‚úÖ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ TestFlight –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã - –≤—ã–±–æ—Ä –∏–≥—Ä–æ–∫–∞, –ø—É–±–ª–∏—á–Ω–æ—Å—Ç—å –∏–≥—Ä, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- 2026-02-03: üêõ –î–æ–±–∞–≤–ª–µ–Ω –ø–ª–∞–Ω –¥–µ–±–∞–≥–∞ GameWithPlayer - –∏–≥—Ä–æ–∫–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ CloudKit
- 2026-02-02 (COMMIT f4fd35e): ‚úÖ Pre-TestFlight —É–ª—É—á—à–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã - —Ä–µ–±—Ä–µ–Ω–¥–∏–Ω–≥, email auth, biometric fix, logging
- 2026-02-02: Pre-TestFlight —É–ª—É—á—à–µ–Ω–∏—è - —Ä–µ–±—Ä–µ–Ω–¥–∏–Ω–≥ –Ω–∞ Fish & Chips, –≤—Ö–æ–¥ –ø–æ email, –Ω–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- 2026-01-31 11:30: –î–æ–±–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–≥–æ –±–∞–≥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ CloudKit
- 2026-01-31 11:30: –î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª "–ë—É–¥—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏" - On-Demand Game Loading
- 2026-01-30: –î–æ–±–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –≠—Ç–∞–ø–∞ 2 - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ TestFlight
- 2026-01-30: –î–æ–±–∞–≤–ª–µ–Ω–æ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ø—Ä–∞–≤–∏–ª–æ - —Å–æ–∑–¥–∞–Ω–∏–µ MD —Ñ–∞–π–ª–æ–≤ —Ç–æ–ª—å–∫–æ —Å —è–≤–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- 2026-01-29: –û—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

---

## üîÑ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–ó–ú–ï–ù–ï–ù–ò–ï: CloudKit = Source of Truth (2026-02-07, 01:30)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### –ù–æ–≤–∞—è —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:

**–ë–´–õ–û:**
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Core Data) + CloudKit
- –ü—Ä–∏ merge: –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã, –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –º–æ–≥–ª–∏ "–≤—ã–∏–≥—Ä—ã–≤–∞—Ç—å" —É CloudKit
- –£–¥–∞–ª–µ–Ω–∏–µ –≤ CloudKit –ù–ï –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ —É–¥–∞–ª–µ–Ω–∏—é –ª–æ–∫–∞–ª—å–Ω–æ

**–°–¢–ê–õ–û:**
- **CloudKit = –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã (Source of Truth)**
- **Core Data = –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à** –¥–ª—è –æ—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç—ã
- –ü—Ä–∏ pull: –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î **–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ CloudKit**
- CloudKit **–í–°–ï–ì–î–ê –ø–æ–±–µ–∂–¥–∞–µ—Ç** –≤ –ª—é–±—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:

#### 1. `mergeGamesWithLocal()`:
```swift
// –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ gameId –∏–∑ CloudKit
var cloudGameIds = Set<UUID>()

// –°–æ–∑–¥–∞–µ–º/–æ–±–Ω–æ–≤–ª—è–µ–º –∏–∑ CloudKit
for record in cloudRecords {
    // –í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ–º (CloudKit = –∏—Å—Ç–∏–Ω–∞)
    localGame.updateFromCKRecord(record)
}

// –£–î–ê–õ–Ø–ï–ú –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–≥—Ä—ã, –∫–æ—Ç–æ—Ä—ã—Ö –ù–ï–¢ –≤ CloudKit
for localGame in allLocalGames {
    if !cloudGameIds.contains(localGame.gameId) {
        context.delete(localGame) // üóëÔ∏è
    }
}
```

#### 2. `mergeGameWithPlayersWithLocal()`:
- –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞: CloudKit ‚Üí Local
- –£–¥–∞–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö GWP, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –≤ CloudKit
- –í—Å–µ–≥–¥–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç `playerProfile` —Å–≤—è–∑—å

#### 3. `pullChanges()`:
- –î–ª—è **–∫–∞–∂–¥–æ–π —Å—É—â–Ω–æ—Å—Ç–∏** (User, PlayerProfile, Game, GWP, Alias, Claim):
  * –°–æ–∑–¥–∞–µ—Ç –µ—Å–ª–∏ –Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
  * –û–±–Ω–æ–≤–ª—è–µ—Ç –µ—Å–ª–∏ –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
  * **–£–î–ê–õ–Ø–ï–¢ –µ—Å–ª–∏ –µ—Å—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –ù–ï–¢ –≤ CloudKit**
- –û—Å–æ–±—ã–π —Å–ª—É—á–∞–π: CloudKit –≤–µ—Ä–Ω—É–ª 0 GWP ‚Üí —É–¥–∞–ª—è–µ—Ç **–í–°–ï** –ª–æ–∫–∞–ª—å–Ω—ã–µ GWP

### –†–µ–∑—É–ª—å—Ç–∞—Ç:

‚úÖ **–£–¥–∞–ª–∏–ª –∏–≥—Ä—ã –≤ DEV CloudKit** ‚Üí –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —É–¥–∞–ª—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ  
‚úÖ **–ü—É—Å—Ç–æ–π CloudKit** ‚Üí –ø—É—Å—Ç–æ–π Core Data –ø–æ—Å–ª–µ pull  
‚úÖ **–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª –∏–≥—Ä—É** ‚Üí push –≤ CloudKit ‚Üí –æ–Ω–∞ —Å—Ç–∞–Ω–µ—Ç –∏—Å—Ç–∏–Ω–æ–π  
‚úÖ **–û–¥–æ–±—Ä–∏–ª –∑–∞—è–≤–∫—É** ‚Üí push –≤ CloudKit ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –Ω–∞ –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞  

### –§–ª–æ—É –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

1. **–°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** (–∏–º–ø–æ—Ä—Ç –∏–≥—Ä—ã, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è):
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ ‚úÖ
   - **–°—Ä–∞–∑—É –ø—É—à–∏—Ç—Å—è –≤ CloudKit** ‚úÖ
   - CloudKit —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è Source of Truth ‚úÖ

2. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**:
   - Fetch –∏–∑ CloudKit ‚úÖ
   - Core Data **–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è** –∫ CloudKit ‚úÖ
   - –£–¥–∞–ª–µ–Ω–Ω—ã–µ –≤ CloudKit ‚Üí —É–¥–∞–ª—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ ‚úÖ

3. **–û—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞**:
   - Core Data —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –∫—ç—à ‚úÖ
   - –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: push ‚Üí CloudKit ‚Üí pull ‚Üí –ª–æ–∫–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è ‚úÖ

---

## üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: PlayerClaim —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (2026-02-07, 00:30)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### –ü—Ä–æ–±–ª–µ–º–∞:
PlayerClaim —Å–æ—Ö—Ä–∞–Ω—è–ª—Å—è –≤ CloudKit Private DB, –Ω–æ **–ù–ï –∑–∞–≥—Ä—É–∂–∞–ª—Å—è** –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏. –•–æ—Å—Ç —Å–æ–∑–¥–∞–≤–∞–ª –∏–≥—Ä—ã –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ 1, –¥—Ä—É–≥–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∞–≤–∞–ª –∑–∞—è–≤–∫—É —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ 2, –Ω–æ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ 1 –∑–∞—è–≤–∫–∏ –Ω–µ –ø–æ—è–≤–ª—è–ª–∏—Å—å –¥–∞–∂–µ –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏.

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
- `syncPlayerClaims()` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç (push) claims –≤ Private DB ‚úì
- `pullChanges()` - –∑–∞–≥—Ä—É–∂–∞–µ—Ç User –∏ PlayerProfile, –Ω–æ –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç PlayerClaim ‚ùå
- `performFullSync()` - –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É PlayerClaim ‚ùå

### –†–µ—à–µ–Ω–∏–µ:

**–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –≤ `CloudKitSyncService.swift`:**

1. **`fetchPlayerClaims()`** - –∑–∞–≥—Ä—É–∂–∞–µ—Ç PlayerClaim –∏–∑ Private DB
2. **`mergePlayerClaimsWithLocal()`** - –º–µ—Ä–∂–∏—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ claims —Å –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
3. **–û–±–Ω–æ–≤–ª–µ–Ω `pullChanges()`** - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ claims
4. **–û–±–Ω–æ–≤–ª–µ–Ω `performFullSync()`** - –¥–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `fetchPlayerClaims()`

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ PlayerClaim —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã (push + pull)
- ‚úÖ –•–æ—Å—Ç –≤–∏–¥–∏—Ç –∑–∞—è–≤–∫–∏ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏ `[FETCH_CLAIMS]` –∏ `[MERGE_CLAIMS]`

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è: User –≤ Public Database (2026-02-06, 23:45)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### –ü—Ä–æ–±–ª–µ–º–∞:
User —Ö—Ä–∞–Ω–∏–ª—Å—è –≤ Private Database, —á—Ç–æ —Å–æ–∑–¥–∞–≤–∞–ª–æ –ø—Ä–æ–±–ª–µ–º—ã:
1. **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email** - Private DB –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É iCloud –∞–∫–∫–∞—É–Ω—Ç–∞
2. **Race condition** - –¥–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–≥—É—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –æ–¥–Ω–∏–º email –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
3. **–õ–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** - –ø—Ä–æ–≤–µ—Ä–∫–∞ CloudKit –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ –æ—à–∏–±–∫—É –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –†–µ—à–µ–Ω–∏–µ - –ú–∏–≥—Ä–∞—Ü–∏—è User –≤ Public Database:

**–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

1. **CloudKitModels.swift** - `User.toCKRecord()` –∏ `updateFromCKRecord()`
   - ‚ùå **–£–±—Ä–∞–Ω passwordHash** –∏–∑ CloudKit —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (sensitive data)
   - ‚úÖ passwordHash —Ö—Ä–∞–Ω–∏—Ç—Å—è –¢–û–õ–¨–ö–û –ª–æ–∫–∞–ª—å–Ω–æ –≤ Core Data
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è: userId, username, email, subscriptionStatus, isSuperAdmin, createdAt

2. **CloudKitSyncService.swift** - –≤—Å–µ User –º–µ—Ç–æ–¥—ã
   - `fetchUser(byUsername:)` - `.privateDB` ‚Üí `.publicDB`
   - `fetchUser(byEmail:)` - `.privateDB` ‚Üí `.publicDB`
   - `quickSyncUser()` - `.privateDB` ‚Üí `.publicDB`
   - `deleteUser()` - `.privateDB` ‚Üí `.publicDB`

3. **AuthViewModel.swift** - `register()`
   - ‚úÖ **–í–æ–∑–≤—Ä–∞—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ CloudKit** - —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ email –≤ Public DB –î–û —Å–æ–∑–¥–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ï—Å–ª–∏ CloudKit –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (–∫—Ä–∏—Ç–∏—á–Ω–æ!)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:

**User:**
- **CloudKit Public DB:** userId, username, email (–ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏)
- **Core Data Local:** userId, username, email, passwordHash (–ª–æ–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è + –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

**PlayerProfile:**
- **CloudKit Private DB:** profileId, userId, displayName, stats (–ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞)

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email —Ä–∞–±–æ—Ç–∞–µ—Ç –î–û —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞
- ‚úÖ –ù–µ—Ç race condition - CloudKit –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ passwordHash –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ CloudKit (security)
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üêõ Hotfix: –û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ TestFlight (2026-02-06, 23:00)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

### –ü—Ä–æ–±–ª–µ–º–∞:
–ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ TestFlight –ø–æ–∫–∞–∑—ã–≤–∞–ª–∞—Å—å "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞", —Ö–æ—Ç—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –∏ –≤—Ö–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏–ª —É—Å–ø–µ—à–Ω–æ. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –±—ã–ª–æ –≤ CloudKit Production Database.

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:
- User —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (Core Data + Keychain) ‚úì
- PlayerProfile —Å–æ–∑–¥–∞–≤–∞–ª—Å—è ‚úì
- –ù–æ User –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–ª—Å—è –≤ CloudKit
- –ü—Ä–æ–≤–µ—Ä–∫–∞ CloudKit –º–æ–≥–ª–∞ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ timeout/network

### –†–µ—à–µ–Ω–∏–µ:
1. **User —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ CloudKit Private Database** –≤ [`AuthViewModel.swift`](FishAndChips/ViewModels/AuthViewModel.swift)
   - –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ User —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ CloudKit Private DB —á–µ—Ä–µ–∑ `quickSyncUser()`
   - **–í–ê–ñ–ù–û:** –ü—Ä–æ–≤–µ—Ä–∫–∞ CloudKit —É–±—Ä–∞–Ω–∞ - Private DB –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username –∏ email —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ (Core Data)
   - Graceful degradation: –µ—Å–ª–∏ CloudKit –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ - –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é

2. **–î–æ–±–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** –≤ [`RegistrationView.swift`](FishAndChips/Views/RegistrationView.swift)
   - Alert "–£—Å–ø–µ—Ö" —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º "–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å!"
   - –ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è OK view –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è

3. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –≤ [`RegistrationView.swift`](FishAndChips/Views/RegistrationView.swift)
   - –í–º–µ—Å—Ç–æ "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ—à–∏–±–∫–∞" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `error.localizedDescription`
   - –ü–æ–ª–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
   - MainActor –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI —Å–æ—Å—Ç–æ—è–Ω–∏—è

4. **Email –¥–æ–±–∞–≤–ª–µ–Ω –≤ –ø—Ä–æ—Ñ–∏–ª—å** –≤ [`ProfileView.swift`](FishAndChips/Views/ProfileView.swift)
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø–æ–¥ username
   - –§–æ—Ä–º–∞—Ç: Username (–∫—Ä—É–ø–Ω–µ–µ) ‚Üí Email (—Å—Ä–µ–¥–Ω–∏–π) ‚Üí UserId (–º–µ–ª–∫–∏–π)

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- User —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ CloudKit Private Database –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–¥–ª—è multi-device)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email/username —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ (Core Data)
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ "–í—ã —É—Å–ø–µ—à–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å!"
- –í –ø—Ä–æ—Ñ–∏–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è email —Ä—è–¥–æ–º —Å username
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç CloudKit

### –ü–æ—á–µ–º—É —É–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ CloudKit –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:
**Private Database –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- Private DB –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª—å—Ü—É iCloud –∞–∫–∫–∞—É–Ω—Ç–∞
- –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –ú–û–ñ–ï–¢ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —á—É–∂–æ–π Private DB
- –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å email –≤ CloudKit –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É –¥–æ—Å—Ç—É–ø–∞
- –†–µ—à–µ–Ω–∏–µ: –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ, User —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

---

## üéØ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ TestFlight (2026-02-06)

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

### –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

#### 1. ‚úÖ –£–±—Ä–∞–Ω —Ö–∞—Ä–¥–∫–æ–¥ "–ù–∏–∫" - –º—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –í `DataImportService.swift` –±—ã–ª–æ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–æ –∏–º—è "–ù–∏–∫", –∏–∑-–∑–∞ —á–µ–≥–æ —Ç–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —ç—Ç–∏–º –∏–º–µ–Ω–µ–º –º–æ–≥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—ã.

**–†–µ—à–µ–Ω–∏–µ:**
- –£–¥–∞–ª—ë–Ω —Ö–∞—Ä–¥–∫–æ–¥ `currentUserName = "–ù–∏–∫"`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `extractUniquePlayerNames()` –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤ –∏–∑ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `PlayerSelectionSheet.swift` —Å UI –¥–ª—è –º—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç–∞ –∏–≥—Ä–æ–∫–æ–≤
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `ImportDataSheet.swift` - –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–µ–ª–µ–∫—Ç –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–æ–≤
- –û–±–Ω–æ–≤–ª—ë–Ω –º–µ—Ç–æ–¥ `importGames()` - –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `selectedPlayerNames: Set<String>`
- –£–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `username == "–ù–∏–∫"` –¥–ª—è —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞ –≤ `AuthViewModel.swift`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–≥—Ä—ã
- **–ú—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç:** –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–≤–æ–µ–≥–æ –∏–º–µ–Ω–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–Ø", "—è", "–ù–∏–∫", "–Ω–∏–∫")
- –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ –±—É–¥—É—Ç —Å–≤—è–∑–∞–Ω—ã —Å –ø—Ä–æ—Ñ–∏–ª–µ–º —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–µ—à–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∫–æ–≥–¥–∞ –æ–¥–∏–Ω –∏–≥—Ä–æ–∫ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–Ω—ã–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –∏–º–µ–Ω–∏

#### 2. ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è GameWithPlayer
**–°—Ç–∞—Ç—É—Å:** –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `syncGameWithPlayers()` —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –≤ Public Database
- ‚úÖ `fetchPublicGameWithPlayers()` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ Public Database
- ‚úÖ `fetchGameWithPlayers(forGameId:)` –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã
- ‚úÖ `mergeGameWithPlayersWithLocal()` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ `GameWithPlayer.toCKRecord()` –∏ `updateFromCKRecord()` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ `performFullSync()` –≤—ã–∑—ã–≤–∞–µ—Ç `fetchPublicGameWithPlayers()`
- ‚úÖ `fetchGame(byId:)` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –ø–æ –¥–∏–ø–ª–∏–Ω–∫—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –î–µ—Ç–∞–ª–∏ –∏–≥—Ä—ã (–∏–≥—Ä–æ–∫–∏, buyins, cashouts) –¥–æ–ª–∂–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.

#### 3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏ –∏–≥—Ä
**–ü—Ä–æ–±–ª–µ–º–∞:** –õ—é–±–∞—è –∏–≥—Ä–∞ –±—ã–ª–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ ID, –Ω–µ –±—ã–ª–æ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: –ø–æ–ª–µ `isPublic` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Core Data –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ CloudKit
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ: Toggle "–ü—É–±–ª–∏—á–Ω–∞—è –∏–≥—Ä–∞" —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ `GameDetailView` (—Å—Ç—Ä–æ–∫–∏ 426-439)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `CloudKitSyncError.gameNotPublic`
- –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω `fetchGame(byId:)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `isPublic` –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
  - –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –ø—É–±–ª–∏—á–Ω–∞ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ —Å–æ–∑–¥–∞—Ç–µ–ª—å ‚Üí –æ—à–∏–±–∫–∞
- –û–±–Ω–æ–≤–ª—ë–Ω `DeepLinkService` - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ `gameNotPublic`
  - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ò–≥—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –°–æ–∑–¥–∞—Ç–µ–ª—å –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–ª –µ—ë –ø—É–±–ª–∏—á–Ω–æ–π."

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–≥—Ä—ã –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ–∑–¥–∞—Ç–µ–ª—è)
- –•–æ—Å—Ç –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∏–≥—Ä—É –ø—É–±–ª–∏—á–Ω–æ–π —á–µ—Ä–µ–∑ Toggle
- –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—É—é –∏–≥—Ä—É –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º ‚Üí –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–∞—è –æ—à–∏–±–∫–∞

#### 4. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ (PlayerClaim)
**–°—Ç–∞—Ç—É—Å:** –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞!

**–ü—Ä–æ–≤–µ—Ä–µ–Ω–æ:**
- ‚úÖ `PlayerClaimService.swift` - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—è–≤–∫–∞–º–∏
- ‚úÖ `ClaimPlayerView.swift` - —Ñ–æ—Ä–º–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏
- ‚úÖ `PendingClaimsView.swift` - –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—è–≤–æ–∫ –¥–ª—è —Ö–æ—Å—Ç–∞
- ‚úÖ `MyClaimsView.swift` - –º–æ–∏ –∑–∞—è–≤–∫–∏
- ‚úÖ `ClaimStatusView.swift` - —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –≤ –∏–≥—Ä–µ
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É" –≤ `GameDetailView` toolbar (—Å—Ç—Ä–æ–∫–∏ 498-504)
- ‚úÖ –õ–æ–≥–∏–∫–∞ `canClaim` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—è–≤–æ–∫ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∏–≥—Ä–∞—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç.

#### 5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î, CloudKit –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª—Å—è. –°—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏ –º–æ–≥–ª–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ, –≤—ã–∑—ã–≤–∞—è –æ—à–∏–±–∫—É "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç".

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ CloudKit –≤ `AuthViewModel.register()` (—Å—Ç—Ä–æ–∫–∏ 204-223)
  - –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `fetchUser(byEmail:)`
  - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω –≤ CloudKit ‚Üí –æ—à–∏–±–∫–∞ "Email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ CloudKit"
  - –ï—Å–ª–∏ CloudKit –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (graceful degradation)
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `deleteUser(userId:)` –≤ `CloudKitSyncService` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏
  - –£–¥–∞–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Private Database
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –æ—á–∏—Å—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** 
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–∞–∫ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î, —Ç–∞–∫ –∏ CloudKit
- –ò–∑–±–µ–≥–∞—é—Ç—Å—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `DataImportService.swift` | –£–¥–∞–ª—ë–Ω —Ö–∞—Ä–¥–∫–æ–¥ "–ù–∏–∫", –¥–æ–±–∞–≤–ª–µ–Ω `extractUniquePlayerNames()`, –ø–∞—Ä–∞–º–µ—Ç—Ä `selectedPlayerNames: Set<String>` |
| `AuthViewModel.swift` | –£–±—Ä–∞–Ω —Ö–∞—Ä–¥–∫–æ–¥ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–∞, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ CloudKit –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ |
| `ImportDataSheet.swift` | –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –º—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç –≤—ã–±–æ—Ä–∞ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ—Å–ª–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ |
| `PlayerSelectionSheet.swift` | **–ù–û–í–´–ô** - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –º—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç–∞ –∏–≥—Ä–æ–∫–æ–≤ (checkbox –≤–º–µ—Å—Ç–æ radio) |
| `CloudKitSyncService.swift` | –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ `gameNotPublic`, –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏—á–Ω–æ—Å—Ç–∏ –≤ `fetchGame()`, –º–µ—Ç–æ–¥ `deleteUser()` |
| `DeepLinkService.swift` | –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ `gameNotPublic` —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º |

### –ß—Ç–æ –Ω—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ TestFlight:

**–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ò–º–ø–æ—Ä—Ç –∏–≥—Ä —Å –º—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç–æ–º –∏–≥—Ä–æ–∫–∞**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–Ω–µ "–ù–∏–∫") –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç Import Data
2. –í—Å—Ç–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å –∏–≥—Ä–æ–∫–∞–º–∏: "–ê–ª–µ–∫—Å", "–ë–æ—Ä–∏—Å", "–Ø", "—è", "–Ω–∏–∫"
3. –ù–∞–∂–∏–º–∞–µ—Ç "–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å"
4. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –º—É–ª—å—Ç–∏-—Å–µ–ª–µ–∫—Ç —Å –∏–≥—Ä–æ–∫–∞–º–∏ (checkbox)
5. –í—ã–±–∏—Ä–∞–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–≤–æ–µ–≥–æ –∏–º–µ–Ω–∏: "–Ø", "—è", "–Ω–∏–∫"
6. –ù–∞–∂–∏–º–∞–µ—Ç "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å" ‚Üí –∏–º–ø–æ—Ä—Ç —É—Å–ø–µ—à–µ–Ω
7. –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –∏–º–µ–Ω–∞ —Å–≤—è–∑–∞–Ω—ã —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü—É–±–ª–∏—á–Ω–æ—Å—Ç—å –∏–≥—Ä—ã**
1. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê: —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É (–ø—Ä–∏–≤–∞—Ç–Ω–∞—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê: –≤–∫–ª—é—á–∏—Ç—å Toggle "–ü—É–±–ª–∏—á–Ω–∞—è –∏–≥—Ä–∞"
3. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê: –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π
4. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ë: –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É ‚Üí –∏–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å –¥–µ—Ç–∞–ª—è–º–∏

**–°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü—Ä–∏–≤–∞—Ç–Ω–∞—è –∏–≥—Ä–∞**
1. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê: —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É (–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ–π)
2. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ê: –ø–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π
3. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ë: –æ—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É ‚Üí –æ—à–∏–±–∫–∞ "–ò–≥—Ä–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –°–æ–∑–¥–∞—Ç–µ–ª—å –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–ª –µ—ë –ø—É–±–ª–∏—á–Ω–æ–π."

**–°—Ü–µ–Ω–∞—Ä–∏–π 4: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è**
1. –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å email
3. –í—ã—Ö–æ–¥
4. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å —Ç–µ–º –∂–µ email ‚Üí –æ—à–∏–±–∫–∞ "Email —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

---

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤

### ‚õî –ö–†–ò–¢–ò–ß–ù–û: –ü—Ä–∞–≤–∏–ª–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤

**–°–¢–†–û–ì–û –ó–ê–ü–†–ï–©–ï–ù–û —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ .md —Ñ–∞–π–ª—ã –±–µ–∑ –Ø–í–ù–û–ì–û —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!**

**–ü—Ä–∞–≤–∏–ª–æ:**
- ‚ùå **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ** –Ω–æ–≤—ã–µ MD —Ñ–∞–π–ª—ã –≤ `docs/` —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ
- ‚ùå **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ** README, GUIDE, CHECKLIST, TEMPLATE –∏–ª–∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ MD —Ñ–∞–π–ª—ã
- ‚úÖ **–°–ü–†–û–°–ò–¢–ï** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª `–∏–º—è_—Ñ–∞–π–ª–∞.md` –¥–ª—è —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏?"
- ‚úÖ **–î–û–ñ–î–ò–¢–ï–°–¨** —è–≤–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ "–¥–∞" –∏–ª–∏ "—Å–æ–∑–¥–∞–π —Ñ–∞–π–ª"
- ‚úÖ **–û–ë–ù–û–í–õ–Ø–ô–¢–ï** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö

**–ò—Å–∫–ª—é—á–µ–Ω–∏—è (–∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –ë–ï–ó —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è):**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ —Å–∫–∞–∑–∞–ª: "—Å–æ–∑–¥–∞–π —Ñ–∞–π–ª X.md"
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∫–∞–∑–∞–ª: "—Å–¥–µ–ª–∞–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö"
3. –≠—Ç–æ —Ñ–∞–π–ª—ã –∫–æ–¥–∞ (.swift, .py, .ts –∏ —Ç.–¥.), –∞ –Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ü—Ä–∏–º–µ—Ä—ã –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –ø–æ–≤–µ–¥–µ–Ω–∏—è:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "—Ä–∞—Å–ø–∏—à–∏ –¥–µ—Ç–∞–ª—å–Ω–µ–π –ø–æ –∑–∞–¥–∞—á–∞–º 2 —ç—Ç–∞–ø"
–ê–≥–µ–Ω—Ç: 
1. –ß–∏—Ç–∞—é MASTER_PLAN.md
2. –û–±–Ω–æ–≤–ª—è—é —Ä–∞–∑–¥–µ–ª "–≠—Ç–∞–ø 2" –≤ MASTER_PLAN.md
3. –ù–ï —Å–æ–∑–¥–∞—é –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã
```

**–ü—Ä–∏–º–µ—Ä—ã –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ì–û –ø–æ–≤–µ–¥–µ–Ω–∏—è:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "—Ä–∞—Å–ø–∏—à–∏ –¥–µ—Ç–∞–ª—å–Ω–µ–π –ø–æ –∑–∞–¥–∞—á–∞–º 2 —ç—Ç–∞–ø"
–ê–≥–µ–Ω—Ç:
‚ùå –°–æ–∑–¥–∞—é TESTING_CHECKLIST.md
‚ùå –°–æ–∑–¥–∞—é TEST_SCENARIOS.md  
‚ùå –°–æ–∑–¥–∞—é BUG_REPORT_TEMPLATE.md
‚ùå –°–æ–∑–¥–∞—é 5+ –Ω–æ–≤—ã—Ö MD —Ñ–∞–π–ª–æ–≤ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
```

---

### –ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞–¥ –ø—Ä–æ–µ–∫—Ç–æ–º:

1. **–í–°–ï–ì–î–ê –Ω–∞—á–∏–Ω–∞–π—Ç–µ —Å —á—Ç–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞:**
   ```
   Read ~/.cursor/plans/testflight_deployment_plan_81a25c38.plan.md
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:**
   - –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ `todos` –≤ –Ω–∞—á–∞–ª–µ –ø–ª–∞–Ω–∞
   - –ù–∞–π–¥–∏—Ç–µ –∑–∞–¥–∞—á–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
   - –ù–∞—á–Ω–∏—Ç–µ —Å –ø–µ—Ä–≤–æ–π –Ω–µ–∑–∞–≤–µ—Ä—à–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏

3. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –í—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–ª–∞–Ω–∞—Ö
   - –û–±–Ω–æ–≤–ª—è–π—Ç–µ –ø–ª–∞–Ω –Ω–∞–ø—Ä—è–º—É—é –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –ï—Å–ª–∏ —Å—á–∏—Ç–∞–µ—Ç–µ –Ω—É–∂–Ω—ã–º —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ñ–∞–π–ª - **–°–ü–†–û–°–ò–¢–ï** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

4. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ —Å—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á** –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
   ```markdown
   status: pending ‚Üí status: in_progress (–Ω–∞—á–∞–ª–∏)
   status: in_progress ‚Üí status: completed (–∑–∞–≤–µ—Ä—à–∏–ª–∏)
   ```

---

## –¢–µ–∫—É—â–∏–π —ç—Ç–∞–ø: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ TestFlight

**–¶–µ–ª—å:** –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–≤—ã–π –±–∏–ª–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ TestFlight –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ CloudKit –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.

**–ü–ª–∞–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–¥–µ—Å—å:** `~/.cursor/plans/testflight_deployment_plan_81a25c38.plan.md`

**–ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ CloudKit –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∫–æ–¥ –≥–æ—Ç–æ–≤)
- ‚úÖ Push Notifications (–∫–æ–¥ –≥–æ—Ç–æ–≤)
- ‚úÖ Repository pattern (–∫–æ–¥ –≥–æ—Ç–æ–≤)
- ‚úÖ 43 unit —Ç–µ—Å—Ç–∞ (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ CloudKit Record Types —Å–æ–∑–¥–∞–Ω—ã –≤ Development
- ‚úÖ –ó–∞–ø–∏—Å–∏ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ CloudKit

**–ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å:**
- ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã!
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –≤ TestFlight
- ‚úÖ Deep linking –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ Pre-TestFlight —É–ª—É—á—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã (commit f4fd35e)

**–ß—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–±–æ—Ä–∫–µ (Build 2 ‚Üí Build 3):**
- ‚úÖ –†–µ–±—Ä–µ–Ω–¥–∏–Ω–≥: "Fish & Chips" –≤–º–µ—Å—Ç–æ "PokerTracker"
- ‚úÖ –í—Ö–æ–¥ –ø–æ email –≤–º–µ—Å—Ç–æ username
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Face ID)
- ‚úÖ –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- ‚úÖ Debug –¥–æ—Å—Ç—É–ø–µ–Ω –≤ TestFlight
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –≤—Å–µ—Ö auth flows

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–≥—Ä—É–∑–∫–µ —Å–ª–µ–¥—É—é—â–µ–π —Å–±–æ—Ä–∫–∏ –≤ TestFlight (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ Xcode Cloud)

---

## –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π

### ‚úÖ –ß—Ç–æ –û–°–¢–ê–í–ò–¢–¨

**–í–∞–∂–Ω—ã–µ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `docs/CLOUDKIT_MANUAL_SETUP_REQUIRED.md` - –¥–µ—Ç–∞–ª–∏ CloudKit –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- `docs/TESTFLIGHT_DEPLOYMENT_GUIDE.md` - –ø–æ–ª–Ω—ã–π –≥–∞–π–¥ –ø–æ TestFlight
- `docs/TECHNICAL_SPEC.md` - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- `docs/MASTER_PLAN.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤)

**Poker Odds –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- –í—Å–µ —Ñ–∞–π–ª—ã `POKER_ODDS_*.md` - —Ä–∞–±–æ—á–∞—è —Ñ–∏—á–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### ‚ùå –ß—Ç–æ –£–î–ê–õ–ò–¢–¨

**‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ (2026-01-29):** –≤—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –Ω–∏–∂–µ —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ `docs/`.

~~Phase Summaries, CloudKit –¥—É–±–ª–∏–∫–∞—Ç—ã, —Å—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (PROGRESS, INDEX, README –∏ –¥—Ä.)~~

### üöÄ –í–∞–∂–Ω–æ: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–±–æ—Ä–∫–∏

**Xcode Cloud –Ω–∞—Å—Ç—Ä–æ–µ–Ω:**
- –ö–∞–∂–¥—ã–π `git push` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—É—é —Å–±–æ—Ä–∫—É –≤ App Store Connect
- –°–±–æ—Ä–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ App Store Connect —á–µ—Ä–µ–∑ 10-20 –º–∏–Ω—É—Ç
- **–í–ê–ñ–ù–û:** –†–µ–ª–∏–∑ –≤ TestFlight –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é:
  1. App Store Connect ‚Üí TestFlight
  2. –ù–∞–π—Ç–∏ –Ω–æ–≤—É—é —Å–±–æ—Ä–∫—É
  3. –ù–∞–∂–∞—Ç—å "Submit for Testing"
  4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å "What to Test" (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
  5. –í—ã–±—Ä–∞—Ç—å –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–æ–≤

**Workflow:**
```
git commit ‚Üí git push ‚Üí Xcode Cloud —Å–±–æ—Ä–∫–∞ ‚Üí App Store Connect ‚Üí Manual TestFlight Release
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- –ù–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∞—Ä—Ö–∏–≤—ã –ª–æ–∫–∞–ª—å–Ω–æ
- –ù–µ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å —á–µ—Ä–µ–∑ Xcode Organizer
- –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Å–±–æ—Ä–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ Apple
- –ò—Å—Ç–æ—Ä–∏—è —Å–±–æ—Ä–æ–∫ –≤ App Store Connect

---

## –ö–∞–∫ –∞–≥–µ–Ω—Ç—É –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É

### –ü—Ä–æ–º–ø—Ç—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≥–æ–≤–æ—Ä–∏—Ç:
- "–ü—Ä–æ–¥–æ–ª–∂–∏ —Ä–∞–±–æ—Ç—É –Ω–∞–¥ TestFlight" 
- "–ö–∞–∫–æ–π —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥?"
- "–ó–∞–≥—Ä—É–∑–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ TestFlight"

**–í—ã –¥–æ–ª–∂–Ω—ã:**
1. –ü—Ä–æ—á–∏—Ç–∞—Ç—å –ø–ª–∞–Ω: `Read ~/.cursor/plans/testflight_deployment_plan_81a25c38.plan.md`
2. –ù–∞–π—Ç–∏ –ø–µ—Ä–≤—ã–π `pending` todo
3. –ù–∞—á–∞—Ç—å –µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
4. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å todo –Ω–∞ `in_progress`
5. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–∞ `completed`

### –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã

```markdown
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ü—Ä–æ–¥–æ–ª–∂–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∫ TestFlight"

–ê–≥–µ–Ω—Ç:
1. Read ~/.cursor/plans/testflight_deployment_plan_81a25c38.plan.md
2. –í–∏–∂—É: todo "cloudkit-indexes" - status: pending
3. –ù–∞—á–∏–Ω–∞—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ:
   - –û—Ç–∫—Ä—ã–≤–∞—é CloudKit Dashboard
   - –î–æ–±–∞–≤–ª—è—é –∏–Ω–¥–µ–∫—Å—ã...
4. –û–±–Ω–æ–≤–ª—è—é plan —Ñ–∞–π–ª:
   - status: pending ‚Üí status: completed
5. –ü–µ—Ä–µ—Ö–æ–∂—É –∫ —Å–ª–µ–¥—É—é—â–µ–º—É todo
```

### –ü—Ä–∏–º–µ—Ä –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ô —Ä–∞–±–æ—Ç—ã

```markdown
‚ùå –°–æ–∑–¥–∞—é –Ω–æ–≤—ã–µ MD —Ñ–∞–π–ª—ã –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è:
   - docs/TESTFLIGHT_PLAN_NEW.md
   - docs/TESTING_CHECKLIST.md
   - docs/TESTING_README.md
   (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê!)

‚ùå –°–ø—Ä–∞—à–∏–≤–∞—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è "–° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å?" –≤–º–µ—Å—Ç–æ —á—Ç–µ–Ω–∏—è –ø–ª–∞–Ω–∞

‚ùå –ù–∞—á–∏–Ω–∞—é —Ä–∞–±–æ—Ç—É, –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–≤ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω

‚ùå –ù–µ –æ–±–Ω–æ–≤–ª—è—é —Å—Ç–∞—Ç—É—Å todos –ø–æ –º–µ—Ä–µ —Ä–∞–±–æ—Ç—ã

‚ùå –ò–≥–Ω–æ—Ä–∏—Ä—É—é –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è AI –∞–≥–µ–Ω—Ç–æ–≤"
```

**–í–ê–ñ–ù–û:** –ï—Å–ª–∏ –≤—ã –Ω–µ —É–≤–µ—Ä–µ–Ω—ã, –º–æ–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª - **–°–ü–†–û–°–ò–¢–ï** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!

---

## üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ë–ê–ì: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è CloudKit

**–î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 2026-01-31 11:04

**üìã –ö–†–ê–¢–ö–û–ï –†–ï–ó–Æ–ú–ï –ü–õ–ê–ù–ê:**
- ‚ö†Ô∏è –°–µ–π—á–∞—Å: –í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ Private DB ‚Üí –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –≤–∏–¥—è—Ç –∏–≥—Ä—ã
- ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò–≥—Ä—ã –≤ Public DB, –∑–∞—è–≤–∫–∏ –≤ Private DB
- üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ + –≤–æ–∑–≤—Ä–∞—Ç –∏–∑ —Ñ–æ–Ω–∞ + pull-to-refresh
- üéØ –¢–µ–∫—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ: –∑–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï –∏–≥—Ä—ã (–ø—Ä–æ—Å—Ç–æ–µ, –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- üîÆ –ë—É–¥—É—â–µ–µ: On-Demand Loading —á–µ—Ä–µ–∑ UserGameLink (–ø–æ—Å–ª–µ TestFlight)

---

### –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
1. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 1: –°–æ–∑–¥–∞–Ω–∞ –∏–≥—Ä–∞, –ø–æ–¥–µ–ª–∏–ª—Å—è —Å—Å—ã–ª–∫–æ–π
2. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 2: –ü–µ—Ä–µ—à–µ–ª –ø–æ —Å—Å—ã–ª–∫–µ ‚Üí –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ
3. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ 2: –ù–∞–∂–∞–ª "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è" ‚Üí –æ—à–∏–±–∫–∞ "–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤—Ä—É—á–Ω—É—é –Ω–µ –ø–æ–º–æ–≥–ª–∞

**–ö–æ—Ä–Ω–µ–≤–∞—è –ø—Ä–∏—á–∏–Ω–∞ (–ø–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞):**

üîç **–¢–ï–ö–£–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê:**
1. –í—Å–µ –∑–∞–ø–∏—Å–∏ (–∏–≥—Ä—ã, –ø—Ä–æ—Ñ–∏–ª–∏, –∑–∞—è–≤–∫–∏) —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ **Private Database** (CloudKitService.swift, —Å—Ç—Ä–æ–∫–∏ 56, 85, 92, 99)
2. CloudKitSyncService.sync() –¢–û–õ–¨–ö–û **–∑–∞–≥—Ä—É–∂–∞–µ—Ç** –ª–æ–∫–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ CloudKit (push), –Ω–æ –ù–ï —Å–∫–∞—á–∏–≤–∞–µ—Ç (pull)
3. –ï—Å—Ç—å –º–µ—Ç–æ–¥ `pullChanges()` (—Å—Ç—Ä–æ–∫–∞ 177), –Ω–æ –æ–Ω:
   - –í—ã–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é (–Ω–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ)
   - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∏–∑ Private Database (—Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–∏ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   - –ù–ï –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –∑–∞–ø–∏—Å–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**üî¥ –î–í–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´:**

**–ü—Ä–æ–±–ª–µ–º–∞ 1: Private vs Public Database**
- ‚ùå –°–µ–π—á–∞—Å: –ò–≥—Ä—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ **Private Database** –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ù—É–∂–Ω–æ: –ò–≥—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ **Public Database** (–¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º –ø–æ –∫–æ–¥—É/—Å—Å—ã–ª–∫–µ)
- **–õ–æ–≥–∏–∫–∞:** 
  - –ò–≥—Ä–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º A ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Public Database
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥/—Å—Å—ã–ª–∫—É ‚Üí –º–æ–∂–µ—Ç –Ω–∞–π—Ç–∏ –∏–≥—Ä—É –≤ Public Database
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –ø–æ–¥–∞–µ—Ç –∑–∞—è–≤–∫—É ‚Üí —Å–æ–∑–¥–∞–µ—Ç—Å—è PlayerClaim –≤ Private Database –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è B

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ**
- ‚ùå –°–µ–π—á–∞—Å: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—É–±–ª–∏—á–Ω—ã–µ –∏–≥—Ä—ã –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –ù—É–∂–Ω–æ: –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –≤—ã–∑—ã–≤–∞—Ç—å `fetchPublicGames()` –∏ merge —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### ‚ö†Ô∏è –í–∞–∂–Ω–æ–µ –∑–∞–º–µ—á–∞–Ω–∏–µ –æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

**–¢–ï–ö–£–©–ï–ï –†–ï–®–ï–ù–ò–ï (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):**
- –ó–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï –ø—É–±–ª–∏—á–Ω—ã–µ –∏–≥—Ä—ã –∏–∑ Public Database –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª–∏—Ç –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- ‚úÖ –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –Ω–∞—á–∞–ª—å–Ω–æ–≥–æ —ç—Ç–∞–ø–∞ (–º–∞–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∏–≥—Ä)
- ‚ö†Ô∏è –ù–ï –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ: –ø—Ä–∏ 1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –∏ 10000+ –∏–≥—Ä–∞—Ö –±—É–¥–µ—Ç –º–µ–¥–ª–µ–Ω–Ω–æ

**–ë–£–î–£–©–ï–ï –†–ï–®–ï–ù–ò–ï (–æ—Ç–ª–æ–∂–µ–Ω–æ –Ω–∞ –ø–æ–∑–¥–Ω—é—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é):**
- –ù–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –∏–≥—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞:
  1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ deep link (—Å—Å—ã–ª–∫–∞ –Ω–∞ –∏–≥—Ä—É)
  2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–¥ –∏–≥—Ä—ã –≤—Ä—É—á–Ω—É—é
  3. –ü—Ä–∏ —ç—Ç–æ–º: fetch –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã –∏–∑ Public DB ‚Üí save –≤ Private DB —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç: —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ª–æ–∫–∞–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ "–µ–≥–æ" –∏–≥—Ä—ã (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–º + —Ç–µ, –∫ –∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏–ª—Å—è)
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
  - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ (—Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∏–≥—Ä—ã)
  - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä
  
üìÖ **–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –±—É–¥—É—â–µ–µ —Ä–µ—à–µ–Ω–∏–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø–æ—Å–ª–µ —ç—Ç–∞–ø–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ TestFlight**

### –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è CloudKit: Best Practices

**CloudKit - —ç—Ç–æ –æ–±–ª–∞—á–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Apple —Å –¥–≤—É–º—è –∑–æ–Ω–∞–º–∏:**

1. **Private Database** - –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–æ—Å—Ç—É–ø–Ω—ã **–¢–û–õ–¨–ö–û** –µ–º—É)
   - User (–ª–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
   - PlayerProfile (–ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   - PlayerClaim (–º–æ–∏ –∑–∞—è–≤–∫–∏ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∏–≥—Ä–∞—Ö)
   
2. **Public Database** - –ø—É–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–¥–æ—Å—Ç—É–ø–Ω—ã **–í–°–ï–ú** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   - Game (–≤—Å–µ –∏–≥—Ä—ã - –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ –∫–æ–¥—É/—Å—Å—ã–ª–∫–µ)
   - GameWithPlayer (—Å–≤—è–∑—å –∏–≥—Ä–∞-–∏–≥—Ä–æ–∫ - –ø—É–±–ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
   - PlayerAlias (–ø—Å–µ–≤–¥–æ–Ω–∏–º—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –∏–≥—Ä–∞—Ö)

**üìä –ü–†–ê–í–ò–õ–¨–ù–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –î–ê–ù–ù–´–•:**

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A —Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A (User A)                                       ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ 1. –°–æ–∑–¥–∞—Ç—å Game –ª–æ–∫–∞–ª—å–Ω–æ (Core Data)                       ‚îÇ
‚îÇ 2. Sync ‚Üí –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Public Database                      ‚îÇ
‚îÇ    ‚úÖ Game –¥–æ—Å—Ç—É–ø–Ω–∞ –í–°–ï–ú –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B –ø–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É:
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B (User B)                                       ‚îÇ
‚îÇ                                                              ‚îÇ
‚îÇ 1. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Üí fetchPublicGames()                   ‚îÇ
‚îÇ    ‚úÖ –ó–∞–≥—Ä—É–∂–∞–µ—Ç Game –∏–∑ Public Database                     ‚îÇ
‚îÇ 2. Deep Link ‚Üí findLocalGame(gameId)                        ‚îÇ
‚îÇ    ‚úÖ –ò–≥—Ä–∞ –Ω–∞–π–¥–µ–Ω–∞ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å                                ‚îÇ
‚îÇ 3. –ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É ‚Üí —Å–æ–∑–¥–∞—Ç—å PlayerClaim                      ‚îÇ
‚îÇ    ‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Private Database User B                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Best Practices –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    CloudKit Sync Flow                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

App Launch
   ‚Üì
1. Check CloudKit availability
   ‚Üì
2. Fetch public games (Public Database)
   ‚Üì
3. Merge with local data (Core Data)
   ‚îú‚îÄ If CloudKit record newer ‚Üí Update local
   ‚îú‚îÄ If local record newer ‚Üí Upload to CloudKit
   ‚îî‚îÄ If conflict ‚Üí Use merge policy (last-writer-wins)
   ‚Üì
4. Subscribe to push notifications (CKSubscription)
   ‚Üì
5. Background sync (–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ push)
```

**–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:**

1. **Public for Shared Data** - –∏–≥—Ä—ã –≤ Public Database (–¥–æ—Å—Ç—É–ø–Ω—ã –≤—Å–µ–º)
2. **Private for Personal Data** - –∑–∞—è–≤–∫–∏, –ø—Ä–æ—Ñ–∏–ª–∏ –≤ Private Database (—Ç–æ–ª—å–∫–æ —Å–≤–æ–∏)
3. **Fetch First** - –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞–π –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º UI
4. **Incremental Sync** - –∏—Å–ø–æ–ª—å–∑—É–π CKFetchRecordZoneChangesOperation –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π
5. **Merge Strategy** - –æ–ø—Ä–µ–¥–µ–ª–∏ –ø—Ä–∞–≤–∏–ª–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–æ–±—ã—á–Ω–æ last-writer-wins)
6. **Cache Locally** - Core Data = local cache, CloudKit = source of truth
7. **Push Updates** - –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ CKQuerySubscription

### –ü–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã

**–§–∞–∑–∞ 0: –ê–†–•–ò–¢–ï–ö–¢–£–†–ù–û–ï –†–ï–®–ï–ù–ò–ï - Private vs Public Database**

**–ó–∞–¥–∞—á–∞ 0.1:** –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –∫—É–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å

**Public Database (–¥–æ—Å—Ç—É–ø–Ω–æ –í–°–ï–ú –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º):**
- ‚úÖ **Game** - –≤—Å–µ –∏–≥—Ä—ã (—á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥–ª–∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –∏—Ö –ø–æ –∫–æ–¥—É/—Å—Å—ã–ª–∫–µ)
- ‚úÖ **GameWithPlayer** - —Å–≤—è–∑—å –∏–≥—Ä–∞-–∏–≥—Ä–æ–∫ (–ø—É–±–ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–∞–≤–µ –∏–≥—Ä—ã)
- ‚úÖ **PlayerAlias** - –ø—Å–µ–≤–¥–æ–Ω–∏–º—ã (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–ø–∏—Å–∫–∞—Ö –∏–≥—Ä)

**Private Database (–¥–æ—Å—Ç—É–ø–Ω–æ –¢–û–õ–¨–ö–û –≤–ª–∞–¥–µ–ª—å—Ü—É):**
- ‚úÖ **User** - –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–ª–æ–≥–∏–Ω, email, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)
- ‚úÖ **PlayerProfile** - –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ **PlayerClaim** - –∑–∞—è–≤–∫–∏ –Ω–∞ —É—á–∞—Å—Ç–∏–µ –≤ –∏–≥—Ä–∞—Ö (–ª–∏—á–Ω—ã–µ –∑–∞—è–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

**–ó–∞–¥–∞—á–∞ 0.2:** –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CloudKitService –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±–µ–∏—Ö –±–∞–∑

–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `database` –≤ –º–µ—Ç–æ–¥—ã:
```swift
func save(record: CKRecord, to database: DatabaseType = .private) async throws -> CKRecord
func fetch(recordID: CKRecord.ID, from database: DatabaseType = .private) async throws -> CKRecord
func fetchRecords(withType type: RecordType, from database: DatabaseType = .private) async throws -> [CKRecord]

enum DatabaseType {
    case publicDB
    case privateDB
}
```

**–ó–∞–¥–∞—á–∞ 0.3:** –û–±–Ω–æ–≤–∏—Ç—å CloudKitSyncService

- syncGames() ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ **Public Database**
- syncGameWithPlayers() ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ **Public Database**
- syncPlayerAliases() ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ **Public Database**
- syncUsers() ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ **Private Database**
- syncPlayerProfiles() ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ **Private Database**
- syncPlayerClaims() ‚Üí —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –≤ **Private Database**

---

**–§–∞–∑–∞ 1: Fetch –ø—É–±–ª–∏—á–Ω—ã—Ö –∏–≥—Ä –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**

**–ó–∞–¥–∞—á–∞ 1.1:** –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ `fetchPublicGames()` –≤ CloudKitSyncService
- –ó–∞–≥—Ä—É–∂–∞—Ç—å –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –∑–∞–ø–∏—Å–∏ CKRecord —Ç–∏–ø–∞ "Game" –∏–∑ **Public Database**
- –§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ —Å—Ç–∞—Ç—É—Å—É (—Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –∏–≥—Ä—ã, softDeleted = false)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–µ)

**–ó–∞–¥–∞—á–∞ 1.2:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å merge –ª–æ–≥–∏–∫—É
- –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å CloudKit –ø–æ `recordName` (ID)
- –ï—Å–ª–∏ –∑–∞–ø–∏—Å–∏ –Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí —Å–æ–∑–¥–∞—Ç—å
- –ï—Å–ª–∏ –µ—Å—Ç—å ‚Üí —Å—Ä–∞–≤–Ω–∏—Ç—å `modificationDate`:
  - CloudKit –Ω–æ–≤–µ–µ ‚Üí –æ–±–Ω–æ–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é
  - –õ–æ–∫–∞–ª—å–Ω–∞—è –Ω–æ–≤–µ–µ ‚Üí –ù–ï –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å (–∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ CloudKit –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º save)

**–ó–∞–¥–∞—á–∞ 1.3:** –í—ã–∑—ã–≤–∞—Ç—å fetch –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ App
- –í `AppDelegate` –∏–ª–∏ `@main` –ø–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Core Data
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å Loading –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –≤–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏ (retry logic)
- **–í–ê–ñ–ù–û:** –¢–∞–∫–∂–µ –≤—ã–∑—ã–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:
  - –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —Ñ–æ–Ω–∞ (ScenePhase.active)
  - Pull-to-refresh –≤ —Å–ø–∏—Å–∫–∞—Ö –∏–≥—Ä
  - –§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (background fetch)

**–§–∞–∑–∞ 2: Incremental Sync (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)**

**–ó–∞–¥–∞—á–∞ 2.1:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CKServerChangeToken
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —Ç–æ–∫–µ–Ω –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º fetch –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è (delta sync)
- –≠—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫ –∏ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏

**–ó–∞–¥–∞—á–∞ 2.2:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
- Background Fetch (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- Push-—Ç—Ä–∏–≥–≥–µ—Ä–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ silent push)

**–§–∞–∑–∞ 3: –û–±—Ä–∞–±–æ—Ç–∫–∞ Deep Links**

**–ó–∞–¥–∞—á–∞ 3.1:** –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É deep link –¥–ª—è –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–≥—Ä
- –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí fetch –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∏–≥—Ä—É –∏–∑ CloudKit –ø–æ ID
- –ü–æ–∫–∞–∑–∞—Ç—å Loading —ç–∫—Ä–∞–Ω: "–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã..."
- –ï—Å–ª–∏ –∏–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ CloudKit ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å alert:
  ```
  "–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞"
  "–í–æ–∑–º–æ–∂–Ω–æ, –∏–≥—Ä–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ —Å—Å—ã–ª–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞"
  [OK]
  ```

**–ó–∞–¥–∞—á–∞ 3.2:** –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º
- –ï—Å–ª–∏ fetch fail –∏–∑-–∑–∞ —Å–µ—Ç–∏ ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å:
  ```
  "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"
  "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É"
  [–ü–æ–≤—Ç–æ—Ä–∏—Ç—å] [–û—Ç–º–µ–Ω–∞]
  ```

**–§–∞–∑–∞ 4: –£–ª—É—á—à–µ–Ω–∏–µ UI/UX**

**–ó–∞–¥–∞—á–∞ 4.1:** –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- –í –ø—Ä–æ—Ñ–∏–ª–µ: "–ü–æ—Å–ª–µ–¥–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: 2 –º–∏–Ω—É—Ç—ã –Ω–∞–∑–∞–¥"
- –ü—Ä–∏ —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: Progress indicator

**–ó–∞–¥–∞—á–∞ 4.2:** Pull-to-refresh ‚≠ê –ö–†–ò–¢–ò–ß–ù–û
- –í —Å–ø–∏—Å–∫–µ –∏–≥—Ä: –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±–Ω–æ–≤–∏—Ç—å —Å–≤–∞–π–ø–æ–º –≤–Ω–∏–∑
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fetch —Å–≤–µ–∂–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- –¢—Ä–∏–≥–≥–µ—Ä–∏—Ç `performFullSync()` –∏–ª–∏ `performIncrementalSync()`

**–ó–∞–¥–∞—á–∞ 4.3:** –§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ —Ñ–æ–Ω–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.onChange(of: scenePhase)` –≤ SwiftUI
- –ö–æ–≥–¥–∞ scenePhase –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ `.active` ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç—å sync

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**0. CloudKitService: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Public/Private Database**

```swift
class CloudKitService {
    private let container: CKContainer
    private let publicDatabase: CKDatabase
    private let privateDatabase: CKDatabase
    
    enum DatabaseType {
        case publicDB
        case privateDB
    }
    
    // –ù–û–í–´–ô –º–µ—Ç–æ–¥ —Å –≤—ã–±–æ—Ä–æ–º –±–∞–∑—ã
    func save(record: CKRecord, to database: DatabaseType = .private) async throws -> CKRecord {
        switch database {
        case .publicDB:
            return try await publicDatabase.save(record)
        case .privateDB:
            return try await privateDatabase.save(record)
        }
    }
    
    func saveRecords(_ records: [CKRecord], to database: DatabaseType = .private) async throws -> [CKRecord] {
        let operation = CKModifyRecordsOperation(recordsToSave: records)
        operation.savePolicy = .changedKeys
        operation.qualityOfService = .userInitiated
        
        return try await withCheckedThrowingContinuation { continuation in
            var savedRecords: [CKRecord] = []
            
            operation.perRecordSaveBlock = { recordID, result in
                switch result {
                case .success(let record):
                    savedRecords.append(record)
                case .failure(let error):
                    print("Failed to save record \(recordID): \(error)")
                }
            }
            
            operation.modifyRecordsResultBlock = { result in
                switch result {
                case .success:
                    continuation.resume(returning: savedRecords)
                case .failure(let error):
                    continuation.resume(throwing: error)
                }
            }
            
            // –ò–ó–ú–ï–ù–ï–ù–û: –≤—ã–±–æ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
            let db = database == .publicDB ? publicDatabase : privateDatabase
            db.add(operation)
        }
    }
    
    func fetchRecords(
        withType type: RecordType, 
        from database: DatabaseType = .private,
        predicate: NSPredicate = NSPredicate(value: true), 
        limit: Int = 100
    ) async throws -> [CKRecord] {
        let query = CKQuery(recordType: type.rawValue, predicate: predicate)
        query.sortDescriptors = [NSSortDescriptor(key: "modificationDate", ascending: false)]
        
        let db = database == .publicDB ? publicDatabase : privateDatabase
        let (matchResults, _) = try await db.records(matching: query, desiredKeys: nil, resultsLimit: limit)
        
        var records: [CKRecord] = []
        for (_, result) in matchResults {
            switch result {
            case .success(let record):
                records.append(record)
            case .failure(let error):
                print("Failed to fetch record: \(error)")
            }
        }
        
        return records
    }
}
```

**1. CloudKitSyncService: –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã**

```swift
class CloudKitSyncService {
    
    // –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –º–µ—Ç–æ–¥ sync() - —Ä–∞–∑–¥–µ–ª—è–µ—Ç Public –∏ Private –∑–∞–ø–∏—Å–∏
    func sync() async throws {
        guard !isSyncing else { return }
        guard await cloudKit.isCloudKitAvailable() else {
            throw CloudKitSyncError.cloudKitNotAvailable
        }
        
        await MainActor.run { isSyncing = true; syncError = nil }
        defer { Task { @MainActor in isSyncing = false } }
        
        do {
            // Private Database sync
            try await syncUsers()              // Private
            try await syncPlayerProfiles()     // Private
            try await syncPlayerClaims()       // Private
            
            // Public Database sync
            try await syncGames()               // Public
            try await syncGameWithPlayers()     // Public
            try await syncPlayerAliases()       // Public
            
            // Update last sync date
            let now = Date()
            await MainActor.run { lastSyncDate = now }
            UserDefaults.standard.set(now, forKey: "lastCloudKitSyncDate")
            
            print("‚úÖ CloudKit sync completed successfully")
        } catch {
            let errorMessage = cloudKit.handleCloudKitError(error)
            await MainActor.run { syncError = errorMessage }
            throw error
        }
    }
    
    // –ò–ó–ú–ï–ù–ï–ù–ù–´–ô –º–µ—Ç–æ–¥ - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Public Database
    private func syncGames() async throws {
        let context = persistence.container.viewContext
        let fetchRequest: NSFetchRequest<Game> = Game.fetchRequest()
        fetchRequest.predicate = NSPredicate(format: "softDeleted == NO")
        let games = try context.fetch(fetchRequest)
        
        let records = games.map { $0.toCKRecord() }
        
        if !records.isEmpty {
            // –ò–ó–ú–ï–ù–ï–ù–û: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ Public Database
            _ = try await cloudKit.saveRecords(records, to: .publicDB)
            print("‚úÖ Synced \(records.count) games to Public Database")
        }
    }
    
    // –ù–û–í–´–ô –º–µ—Ç–æ–¥ - –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ)
    func performFullSync() async throws {
        // Fetch –¥–∞–Ω–Ω—ã–µ –∏–∑ CloudKit
        try await fetchPublicGames()
        try await fetchPublicGameWithPlayers()
        try await fetchPublicPlayerAliases()
        
        // Push –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ CloudKit
        try await sync()
    }
    
    // –ù–û–í–´–ô –º–µ—Ç–æ–¥ - –∑–∞–≥—Ä—É–∑–∫–∞ –≤—Å–µ—Ö –ø—É–±–ª–∏—á–Ω—ã—Ö –∏–≥—Ä
    func fetchPublicGames() async throws {
        let predicate = NSPredicate(format: "softDeleted == NO")
        let records = try await cloudKit.fetchRecords(
            withType: .game,
            from: .publicDB,
            predicate: predicate,
            limit: 500
        )
        
        if records.isEmpty {
            print("‚ÑπÔ∏è No public games found in CloudKit")
            return
        }
        
        // Merge —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
        await mergeGamesWithLocal(records)
        print("‚úÖ Fetched \(records.count) public games from CloudKit")
    }
    
    // –ù–û–í–´–ô –º–µ—Ç–æ–¥ - merge —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –¥–ª—è –∏–≥—Ä
    private func mergeGamesWithLocal(_ cloudRecords: [CKRecord]) async {
        let context = persistence.container.viewContext
        
        await context.perform {
            for record in cloudRecords {
                let gameId = UUID(uuidString: record.recordID.recordName)!
                
                // –ò—â–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
                let fetchRequest: NSFetchRequest<Game> = Game.fetchRequest()
                fetchRequest.predicate = NSPredicate(
                    format: "id == %@", 
                    gameId as CVarArg
                )
                
                if let localGame = try? context.fetch(fetchRequest).first {
                    // –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º –¥–∞—Ç—ã
                    if let cloudModDate = record.modificationDate,
                       let localModDate = localGame.lastModified,
                       cloudModDate > localModDate {
                        // CloudKit –Ω–æ–≤–µ–µ ‚Üí –æ–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é
                        localGame.updateFromCKRecord(record)
                        print("üîÑ Updated local game: \(gameId)")
                    }
                } else {
                    // –ù–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí —Å–æ–∑–¥–∞–µ–º
                    if let newGame = self.createGameFromCKRecord(record, in: context) {
                        print("‚ûï Created local game: \(gameId)")
                    }
                }
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è
            if context.hasChanges {
                try? context.save()
            }
        }
    }
    
    // –ù–û–í–´–ô –º–µ—Ç–æ–¥ - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã –∏–∑ CKRecord
    private func createGameFromCKRecord(_ record: CKRecord, in context: NSManagedObjectContext) -> Game? {
        let game = Game(context: context)
        game.updateFromCKRecord(record)
        return game
    }
    
    // –ù–û–í–´–ô –º–µ—Ç–æ–¥ - –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (delta sync)
    func performIncrementalSync() async throws {
        guard let token = UserDefaults.standard.lastSyncToken else {
            // –ù–µ—Ç —Ç–æ–∫–µ–Ω–∞ ‚Üí –ø–æ–ª–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
            return try await performFullSync()
        }
        
        // Fetch —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
        // (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ CKFetchRecordZoneChangesOperation)
        print("üîÑ Performing incremental sync with token")
    }
    
    // –ù–û–í–´–ô –º–µ—Ç–æ–¥ - fetch –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã –ø–æ ID (–¥–ª—è deep link)
    func fetchGame(byId gameId: UUID) async throws -> Game? {
        let recordID = CKRecord.ID(recordName: gameId.uuidString)
        
        do {
            let record = try await cloudKit.fetch(recordID: recordID, from: .publicDB)
            
            // –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é
            let context = persistence.container.viewContext
            return await context.perform {
                let fetchRequest: NSFetchRequest<Game> = Game.fetchRequest()
                fetchRequest.predicate = NSPredicate(format: "id == %@", gameId as CVarArg)
                
                if let existingGame = try? context.fetch(fetchRequest).first {
                    existingGame.updateFromCKRecord(record)
                    try? context.save()
                    return existingGame
                } else {
                    let newGame = self.createGameFromCKRecord(record, in: context)
                    try? context.save()
                    return newGame
                }
            }
        } catch {
            throw CloudKitSyncError.gameNotFound
        }
    }
}

// –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –æ—à–∏–±–∫—É
enum CloudKitSyncError: LocalizedError {
    case cloudKitNotAvailable
    case syncInProgress
    case networkError
    case authenticationRequired
    case gameNotFound  // –ù–û–í–ê–Ø
    
    var errorDescription: String? {
        switch self {
        case .gameNotFound:
            return "–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ CloudKit"
        // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–ª—É—á–∞–∏
        }
    }
}
```

**2. App Launch: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**

```swift
@main
struct FishAndChipsApp: App {
    @StateObject private var persistenceController = PersistenceController.shared
    @StateObject private var syncService = CloudKitSyncService.shared
    @State private var isInitialSyncComplete = false
    @Environment(\.scenePhase) private var scenePhase
    
    init() {
        // –ó–∞–ø—É—Å–∫–∞–µ–º –ø–µ—Ä–≤–∏—á–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
        Task {
            do {
                print("üöÄ Starting initial sync...")
                try await syncService.performFullSync()
                await MainActor.run {
                    isInitialSyncComplete = true
                }
                print("‚úÖ Initial sync completed")
            } catch {
                print("‚ùå Sync error: \(error)")
                // –ù–µ –±–ª–æ–∫–∏—Ä—É–µ–º –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
                await MainActor.run {
                    isInitialSyncComplete = true
                }
            }
        }
    }
    
    var body: some Scene {
        WindowGroup {
            if isInitialSyncComplete {
                ContentView()
                    .environment(\.managedObjectContext, persistenceController.container.viewContext)
                    .onAppear {
                        // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                        Task {
                            await syncService.subscribeToPushNotifications()
                        }
                    }
            } else {
                // –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏
                VStack {
                    ProgressView()
                    Text("–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...")
                        .padding()
                }
            }
        }
        // üîÑ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ —Ñ–æ–Ω–∞
        .onChange(of: scenePhase) { oldPhase, newPhase in
            if newPhase == .active {
                print("üîÑ App became active, starting background sync...")
                Task {
                    do {
                        // –ò—Å–ø–æ–ª—å–∑—É–µ–º incremental sync –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ
                        if UserDefaults.standard.lastSyncToken != nil {
                            try await syncService.performIncrementalSync()
                        } else {
                            try await syncService.performFullSync()
                        }
                        print("‚úÖ Background sync completed")
                    } catch {
                        print("‚ùå Background sync error: \(error)")
                    }
                }
            }
        }
    }
}
```

**3. Deep Link Handler: Fetch –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã**

```swift
func handleDeepLink(gameId: String) async {
    guard let uuid = UUID(uuidString: gameId) else {
        showAlert(title: "–û—à–∏–±–∫–∞", message: "–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Å—ã–ª–∫–∞")
        return
    }
    
    // 1. –ò—â–µ–º –ª–æ–∫–∞–ª—å–Ω–æ
    if let localGame = await findLocalGame(id: uuid) {
        navigateToGame(localGame)
        return
    }
    
    // 2. –ù–µ –Ω–∞—à–ª–∏ ‚Üí fetch –∏–∑ CloudKit
    await MainActor.run {
        showLoadingIndicator("–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...")
    }
    
    do {
        if let cloudGame = try await CloudKitSyncService.shared.fetchGame(byId: uuid) {
            await MainActor.run {
                hideLoadingIndicator()
                navigateToGame(cloudGame)
            }
        } else {
            await MainActor.run {
                hideLoadingIndicator()
                showAlert(
                    title: "–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞",
                    message: "–í–æ–∑–º–æ–∂–Ω–æ, –∏–≥—Ä–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞ –∏–ª–∏ —Å—Å—ã–ª–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞"
                )
            }
        }
    } catch {
        await MainActor.run {
            hideLoadingIndicator()
            showAlert(
                title: "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏",
                message: "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É",
                primaryButton: .default(Text("–ü–æ–≤—Ç–æ—Ä–∏—Ç—å")) {
                    Task { await handleDeepLink(gameId: gameId) }
                },
                secondaryButton: .cancel(Text("–û—Ç–º–µ–Ω–∞"))
            )
        }
    }
}
```

**4. UserDefaults: –•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**

```swift
extension UserDefaults {
    var lastSyncToken: CKServerChangeToken? {
        get {
            guard let data = data(forKey: "lastSyncToken") else { return nil }
            return try? NSKeyedUnarchiver.unarchivedObject(
                ofClass: CKServerChangeToken.self, 
                from: data
            )
        }
        set {
            if let token = newValue {
                let data = try? NSKeyedArchiver.archivedData(
                    withRootObject: token,
                    requiringSecureCoding: true
                )
                set(data, forKey: "lastSyncToken")
            } else {
                removeObject(forKey: "lastSyncToken")
            }
        }
    }
}
```

**5. Core Data Extension: updateFromCKRecord –¥–ª—è Game**

```swift
extension Game {
    func updateFromCKRecord(_ record: CKRecord) {
        // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–ª—è –∏–∑ CloudKit –∑–∞–ø–∏—Å–∏
        if let gameType = record["gameType"] as? String {
            self.gameType = gameType
        }
        if let notes = record["notes"] as? String {
            self.notes = notes
        }
        if let timestamp = record["timestamp"] as? Date {
            self.timestamp = timestamp
        }
        if let creatorUserIdString = record["creatorUserId"] as? String,
           let creatorUserId = UUID(uuidString: creatorUserIdString) {
            self.creatorUserId = creatorUserId
        }
        if let softDeleted = record["softDeleted"] as? Int {
            self.softDeleted = softDeleted != 0
        }
        
        // –û–±–Ω–æ–≤–ª—è–µ–º lastModified
        self.lastModified = record.modificationDate ?? Date()
    }
}
```

**6. Pull-to-Refresh –≤ —Å–ø–∏—Å–∫–µ –∏–≥—Ä**

```swift
import SwiftUI

struct GamesListView: View {
    @FetchRequest(
        sortDescriptors: [NSSortDescriptor(keyPath: \Game.timestamp, ascending: false)],
        predicate: NSPredicate(format: "softDeleted == NO"),
        animation: .default
    )
    private var games: FetchedResults<Game>
    
    @StateObject private var syncService = CloudKitSyncService.shared
    @State private var isRefreshing = false
    
    var body: some View {
        List {
            ForEach(games) { game in
                GameRowView(game: game)
            }
        }
        .refreshable {
            await refreshGames()
        }
        .overlay {
            if syncService.isSyncing && !isRefreshing {
                VStack {
                    ProgressView()
                    Text("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è...")
                        .font(.caption)
                        .foregroundColor(.secondary)
                }
                .padding()
                .background(.ultraThinMaterial)
                .cornerRadius(10)
            }
        }
    }
    
    private func refreshGames() async {
        isRefreshing = true
        defer { isRefreshing = false }
        
        do {
            print("üîÑ Pull-to-refresh triggered")
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º incremental sync –µ—Å–ª–∏ –µ—Å—Ç—å —Ç–æ–∫–µ–Ω
            if UserDefaults.standard.lastSyncToken != nil {
                try await syncService.performIncrementalSync()
            } else {
                try await syncService.performFullSync()
            }
            
            print("‚úÖ Pull-to-refresh completed")
        } catch {
            print("‚ùå Pull-to-refresh error: \(error)")
            // –ú–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å alert —Å –æ—à–∏–±–∫–æ–π
        }
    }
}
```

**7. –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ**

```swift
struct ProfileView: View {
    @StateObject private var syncService = CloudKitSyncService.shared
    @State private var showingSyncError = false
    
    var body: some View {
        List {
            // ... –¥—Ä—É–≥–∏–µ —Å–µ–∫—Ü–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è
            
            Section("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è") {
                HStack {
                    Image(systemName: "icloud.and.arrow.up.fill")
                        .foregroundColor(.blue)
                    
                    VStack(alignment: .leading) {
                        Text("CloudKit")
                            .font(.headline)
                        Text(syncService.syncStatusText)
                            .font(.caption)
                            .foregroundColor(.secondary)
                    }
                    
                    Spacer()
                    
                    if syncService.isSyncing {
                        ProgressView()
                    } else {
                        Button(action: {
                            Task {
                                await manualSync()
                            }
                        }) {
                            Image(systemName: "arrow.clockwise")
                        }
                    }
                }
                
                if let error = syncService.syncError {
                    HStack {
                        Image(systemName: "exclamationmark.triangle.fill")
                            .foregroundColor(.red)
                        Text(error)
                            .font(.caption)
                            .foregroundColor(.red)
                    }
                }
            }
        }
    }
    
    private func manualSync() async {
        do {
            try await syncService.performFullSync()
        } catch {
            showingSyncError = true
        }
    }
}
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏ –æ—á–µ—Ä–µ–¥–Ω–æ—Å—Ç—å

**–ö–†–ò–¢–ò–ß–ù–û (–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å):**

**–§–∞–∑–∞ 0: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**
1. ‚úÖ –ó–∞–¥–∞—á–∞ 0.1: –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ Private/Public Database ‚úÖ –ì–û–¢–û–í–û
2. ‚¨ú –ó–∞–¥–∞—á–∞ 0.2: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CloudKitService (–¥–æ–±–∞–≤–∏—Ç—å `DatabaseType`)
3. ‚¨ú –ó–∞–¥–∞—á–∞ 0.3: –û–±–Ω–æ–≤–∏—Ç—å CloudKitSyncService (—Ä–∞–∑–¥–µ–ª–∏—Ç—å sync –Ω–∞ Public/Private)

**–§–∞–∑–∞ 1: Fetch –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ + –§–æ–Ω–æ–≤–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**
4. ‚¨ú –ó–∞–¥–∞—á–∞ 1.1: –°–æ–∑–¥–∞—Ç—å `fetchPublicGames()` –≤ CloudKitSyncService
5. ‚¨ú –ó–∞–¥–∞—á–∞ 1.2: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å merge –ª–æ–≥–∏–∫—É (`mergeGamesWithLocal()`)
6. ‚¨ú –ó–∞–¥–∞—á–∞ 1.3: –í—ã–∑—ã–≤–∞—Ç—å `performFullSync()` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ App
7. ‚¨ú –ó–∞–¥–∞—á–∞ 4.3: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ —Ñ–æ–Ω–∞ (ScenePhase.active)

**–§–∞–∑–∞ 3: Deep Links**
8. ‚¨ú –ó–∞–¥–∞—á–∞ 3.1: –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É deep link (fetch –µ—Å–ª–∏ –Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ)
9. ‚¨ú –ó–∞–¥–∞—á–∞ 3.2: –î–æ–±–∞–≤–∏—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —Å–µ—Ç–∏

**–§–∞–∑–∞ 4: UI –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏**
10. ‚¨ú –ó–∞–¥–∞—á–∞ 4.2: Pull-to-refresh –≤ —Å–ø–∏—Å–∫–∞—Ö –∏–≥—Ä ‚≠ê –ö–†–ò–¢–ò–ß–ù–û
11. ‚¨ú –ó–∞–¥–∞—á–∞ 4.1: UI —Å—Ç–∞—Ç—É—Å–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ

**–í–ê–ñ–ù–û (–ø–æ—Å–ª–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á):**
12. –ó–∞–¥–∞—á–∞ 2.1: Incremental sync —Å CKServerChangeToken
13. –ó–∞–¥–∞—á–∞ 2.2: Background fetch (–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –≤ —Ñ–æ–Ω–µ)

**–û–ü–¶–ò–û–ù–ê–õ–¨–ù–û (–æ—Ç–ª–æ–∂–µ–Ω–æ –Ω–∞ –±—É–¥—É—â–µ–µ):**
- –≠—Ç–∞–ø 5: On-Demand Game Loading (–ø–æ—Å–ª–µ TestFlight, –∫–æ–≥–¥–∞ –∏–≥—Ä > 100)
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç-—Ä–µ–∑–æ–ª—é—Ü–∏—è (–ø–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º last-writer-wins)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞—Ç—á–∏–Ω–≥–∞ (–ø–æ–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏)

**‚ö†Ô∏è –í–ê–ñ–ù–ê–Ø –ó–ê–ú–ï–¢–ö–ê:**
–ü–æ—Å–ª–µ –§–∞–∑—ã 0 –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è **–ø–æ–≤—Ç–æ—Ä–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è CloudKit schema** –≤ Development:
- Game, GameWithPlayer, PlayerAlias ‚Üí –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ Public Database
- User, PlayerProfile, PlayerClaim ‚Üí –æ—Å—Ç–∞–≤–∏—Ç—å –≤ Private Database

–ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ CloudKit Dashboard –≤—Ä—É—á–Ω—É—é –∏–ª–∏ —á–µ—Ä–µ–∑ CloudKitSchemaCreator.

### –ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- [ ] –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –ø—É–±–ª–∏—á–Ω—ã–µ –∏–≥—Ä—ã
- [ ] –ü—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ —Ñ–æ–Ω–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- [ ] Pull-to-refresh —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–ø–∏—Å–∫–∞—Ö –∏–≥—Ä
- [ ] Deep link –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–≥—Ä—É –∏–∑ CloudKit –µ—Å–ª–∏ –Ω–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ
- [ ] –û—à–∏–±–∫–∞ "–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è" –≤ –ø—Ä–æ—Ñ–∏–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –ø–æ—Å–ª–µ merge
- [ ] Core Data + CloudKit –¥–∞–Ω–Ω—ã–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ 2+ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö —Å —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

---

## üêõ –ù–û–í–´–ô –ë–ê–ì: GameWithPlayer –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è (2026-02-03)

**–î–∞—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:** 2026-02-03

**üìã –ö–†–ê–¢–ö–û–ï –û–ü–ò–°–ê–ù–ò–ï –ü–†–û–ë–õ–ï–ú–´:**
- ‚úÖ –ò–≥—Ä–∞ (Game) —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ Public DB - —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå –ò–≥—Ä–æ–∫–∏ (GameWithPlayer) –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ CloudKit –≤–æ–æ–±—â–µ
- üîç –†–µ–∑—É–ª—å—Ç–∞—Ç: –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–≥—Ä—ã –ø–æ –¥–∏–ø–ª–∏–Ω–∫—É –¥—Ä—É–≥–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö" –∏ "–ò–≥—Ä–æ–∫–∏ (0)"

### –°–∏–º–ø—Ç–æ–º—ã

**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A —Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É, –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ —Å buyins/cashouts
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A –¥–µ–ª–∏—Ç—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏–≥—Ä—É (–¥–∏–ø–ª–∏–Ω–∫)
3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B (–¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –¥—Ä—É–≥–æ–π iCloud) –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Å—Å—ã–ª–∫—É
4. –ò–≥—Ä–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è (—ç–∫—Ä–∞–Ω "–î–µ—Ç–∞–ª–∏ –∏–≥—Ä—ã")
5. –ù–û: "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã: –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö", "–ò–≥—Ä–æ–∫–∏ (0)"

**–°–∫—Ä–∏–Ω—à–æ—Ç –ø—Ä–æ–±–ª–µ–º—ã:**
- –î–∞—Ç–∞ –∏–≥—Ä—ã: 25 —è–Ω–≤. 2026–≥., 00:00
- –°—É–º–º–∞ –±–∞–π–∏–Ω–æ–≤: 0 (0 –¢)
- –ò–≥—Ä–æ–∫–∏: 0
- –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –∏–≥—Ä–µ" (–Ω–µ –∞–∫—Ç–∏–≤–Ω–∞)

### –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞

**–ß—Ç–æ –†–ê–ë–û–¢–ê–ï–¢:**
1. ‚úÖ [`CloudKitService.swift`](FishAndChips/Services/CloudKitService.swift) - –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Public/Private DB
2. ‚úÖ [`CloudKitSyncService.syncGames()`](FishAndChips/Services/CloudKitSyncService.swift#L142-157) - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç Game –≤ Public DB
3. ‚úÖ [`CloudKitSyncService.fetchPublicGames()`](FishAndChips/Services/CloudKitSyncService.swift#L233) - –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏–≥—Ä—ã –∏–∑ Public DB
4. ‚úÖ [`DeepLinkService`](FishAndChips/Services/DeepLinkService.swift) - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∏–ø–ª–∏–Ω–∫–∏ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç fetchGame(byId:)

**–ß—Ç–æ –ù–ï –†–ê–ë–û–¢–ê–ï–¢:**
1. ‚ùå [`CloudKitModels.swift`](FishAndChips/Models/CloudKit/CloudKitModels.swift) - –ù–ï–¢ extension –¥–ª—è GameWithPlayer (toCKRecord, updateFromCKRecord)
2. ‚ùå [`CloudKitSyncService.swift`](FishAndChips/Services/CloudKitSyncService.swift) - –ù–ï–¢ –º–µ—Ç–æ–¥–∞ syncGameWithPlayers()
3. ‚ùå –ù–µ—Ç –º–µ—Ç–æ–¥–∞ fetchPublicGameWithPlayers()
4. ‚ùå –ù–µ—Ç –º–µ—Ç–æ–¥–∞ fetchGameWithPlayers(forGameId:) –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã
5. ‚ùå GameWithPlayer –∑–∞–ø–∏—Å–∏ –≤–æ–æ–±—â–µ –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ CloudKit

**–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ:**
- [`CloudKitSchemaCreator.swift`](FishAndChips/Services/CloudKitSchemaCreator.swift#L118-127) —Å–æ–∑–¥–∞–µ—Ç sample GameWithPlayer –≤ **Public DB** - —Å—Ö–µ–º–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è
- –ù–æ —Ä–µ–∞–ª—å–Ω—ã–π –∫–æ–¥ –ù–ï —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç GameWithPlayer —Ç—É–¥–∞

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

**GameWithPlayer - —á—Ç–æ —ç—Ç–æ:**
- –°–≤—è–∑—å many-to-many –º–µ–∂–¥—É Game –∏ Player
- –°–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞ –∏–≥—Ä—ã: buyin (Int16), cashout (Int64)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω —Å PlayerProfile (–¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
- –°–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ –∏–≥—Ä—É

**–ì–¥–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è:**
- [`AddPlayerToGameSheet.swift`](FishAndChips/AddPlayerToGameSheet.swift#L77) - –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏–≥—Ä–æ–∫–∞
- [`DataImportService.swift`](FishAndChips/Services/DataImportService.swift#L327) - –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –¥–∞–Ω–Ω—ã—Ö
- Tests - –≤ —Ç–µ—Å—Ç–∞—Ö

**–ì–¥–µ –î–û–õ–ñ–ï–ù —Ö—Ä–∞–Ω–∏—Ç—å—Å—è:**
- ‚úÖ Public Database - —á—Ç–æ–±—ã –¥—Ä—É–≥–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥–µ–ª–∏ —Å–æ—Å—Ç–∞–≤ –∏–≥—Ä—ã
- ‚ùå –ù–ï Private Database - –∏–Ω–∞—á–µ —Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏–≥—Ä–æ–∫–æ–≤

### –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

#### –≠—Ç–∞–ø 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ CloudKit Dashboard

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å—Ö–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ –ø–æ–Ω—è—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å CloudKit Dashboard ‚Üí Development environment
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Public Database ‚Üí Schema ‚Üí Record Types:
   - [ ] Game - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
   - [ ] PlayerAlias - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
   - [ ] GameWithPlayer - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏, –∫–∞–∫–∏–µ –ø–æ–ª—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Private Database ‚Üí Schema ‚Üí Record Types:
   - [ ] User - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
   - [ ] PlayerProfile - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
   - [ ] PlayerClaim - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å
   - [ ] GameWithPlayer - –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å (–µ—Å–ª–∏ –µ—Å—Ç—å - —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:
   - Public Database ‚Üí Data ‚Üí –Ω–∞–π—Ç–∏ –∏–≥—Ä—É –æ—Ç 25 —è–Ω–≤. 2026
   - –ó–∞–ø–∏—Å–∞—Ç—å recordID –∏–≥—Ä—ã
   - –ò—Å–∫–∞—Ç—å GameWithPlayer –∑–∞–ø–∏—Å–∏ –¥–ª—è —ç—Ç–æ–π –∏–≥—Ä—ã (Public DB query)
   - –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Private DB

**–ß—Ç–æ —Å–Ω—è—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏:**
- [ ] Public DB: —Å–ø–∏—Å–æ–∫ Record Types
- [ ] Public DB: —Å—Ö–µ–º–∞ GameWithPlayer (–µ—Å–ª–∏ –µ—Å—Ç—å)
- [ ] Private DB: —Å–ø–∏—Å–æ–∫ Record Types  
- [ ] Data: –∑–∞–ø–∏—Å—å Game
- [ ] Data: –∑–∞–ø–∏—Å–∏ GameWithPlayer (–≥–¥–µ –Ω–∞—à–ª–∏—Å—å)

#### –≠—Ç–∞–ø 2: –î–æ–±–∞–≤–∏—Ç—å CloudKit extension –¥–ª—è GameWithPlayer

**–§–∞–π–ª:** [`FishAndChips/Models/CloudKit/CloudKitModels.swift`](FishAndChips/Models/CloudKit/CloudKitModels.swift)

**–î–æ–±–∞–≤–∏—Ç—å –ø–æ—Å–ª–µ PlayerClaim extension (—Å—Ç—Ä–æ–∫–∞ 294):**

```swift
// MARK: - GameWithPlayer CloudKit Extension

extension GameWithPlayer {
    func toCKRecord() -> CKRecord {
        // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
        let recordID = CKRecord.ID(recordName: UUID().uuidString)
        let record = CKRecord(recordType: "GameWithPlayer", recordID: recordID)
        
        record["buyin"] = buyin as CKRecordValue
        record["cashout"] = cashout as CKRecordValue
        
        // Reference –∫ Game (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
        if let game = game {
            let gameRef = CKRecord.Reference(
                recordID: CKRecord.ID(recordName: game.gameId.uuidString),
                action: .deleteSelf  // –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –∏–≥—Ä—ã
            )
            record["game"] = gameRef as CKRecordValue
        }
        
        // Reference –∫ PlayerProfile (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
        if let playerProfile = playerProfile {
            let profileRef = CKRecord.Reference(
                recordID: CKRecord.ID(recordName: playerProfile.profileId.uuidString),
                action: .none
            )
            record["playerProfile"] = profileRef as CKRecordValue
        }
        
        // –ò–º—è –∏–≥—Ä–æ–∫–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
        if let player = player, let playerName = player.name {
            record["playerName"] = playerName as CKRecordValue
        }
        
        return record
    }
    
    func updateFromCKRecord(_ record: CKRecord) {
        if let buyin = record["buyin"] as? Int16 {
            self.buyin = buyin
        }
        if let cashout = record["cashout"] as? Int64 {
            self.cashout = cashout
        }
        // References (game, playerProfile) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∏ merge
    }
}
```

#### –≠—Ç–∞–ø 3: –î–æ–±–∞–≤–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é GameWithPlayer

**–§–∞–π–ª:** [`FishAndChips/Services/CloudKitSyncService.swift`](FishAndChips/Services/CloudKitSyncService.swift)

**3.1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ syncGameWithPlayers() –ø–æ—Å–ª–µ syncGames() (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 157):**

```swift
// MARK: - GameWithPlayer Sync (Public Database)

private func syncGameWithPlayers() async throws {
    let context = persistence.container.viewContext
    
    let fetchRequest: NSFetchRequest<GameWithPlayer> = GameWithPlayer.fetchRequest()
    // –¢–æ–ª—å–∫–æ –¥–ª—è –Ω–µ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –∏–≥—Ä
    fetchRequest.predicate = NSPredicate(format: "game.softDeleted == NO")
    
    let gameWithPlayers = try context.fetch(fetchRequest)
    
    let records = gameWithPlayers.map { $0.toCKRecord() }
    
    if !records.isEmpty {
        _ = try await cloudKit.saveRecords(records, to: .publicDB)
        print("‚úÖ Synced \(records.count) game-player records to Public Database")
    }
}
```

**3.2. –û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ sync() (—Å—Ç—Ä–æ–∫–∞ 68-90) - –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ syncGameWithPlayers():**

```swift
do {
    // Private Database sync
    try await syncUsers()              // Private
    try await syncPlayerProfiles()     // Private
    try await syncPlayerClaims()       // Private
    
    // Public Database sync
    try await syncGames()               // Public
    try await syncGameWithPlayers()     // Public ‚Üê –î–û–ë–ê–í–ò–¢–¨ –≠–¢–£ –°–¢–†–û–ö–£
    try await syncPlayerAliases()       // Public
    
    // Update last sync date
    let now = Date()
    await MainActor.run { lastSyncDate = now }
    UserDefaults.standard.set(now, forKey: "lastCloudKitSyncDate")
    
    print("‚úÖ CloudKit sync completed successfully")
}
```

#### –≠—Ç–∞–ø 4: –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É GameWithPlayer

**–§–∞–π–ª:** [`FishAndChips/Services/CloudKitSyncService.swift`](FishAndChips/Services/CloudKitSyncService.swift)

**4.1. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ fetchPublicGameWithPlayers() –ø–æ—Å–ª–µ fetchPublicPlayerAliases() (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 268):**

```swift
// MARK: - Fetch Public GameWithPlayer

private func fetchPublicGameWithPlayers() async throws {
    let records = try await cloudKit.fetchRecords(
        withType: .gameWithPlayer,
        from: .publicDB,
        limit: 1000
    )
    
    if !records.isEmpty {
        print("üì• Fetched \(records.count) game-player records from CloudKit")
        await mergeGameWithPlayersWithLocal(records)
    }
}
```

**4.2. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ mergeGameWithPlayersWithLocal():**

```swift
@MainActor
private func mergeGameWithPlayersWithLocal(_ cloudRecords: [CKRecord]) async {
    let context = persistence.container.viewContext
    
    for record in cloudRecords {
        // –ü–æ–ª—É—á–∞–µ–º gameId –∏–∑ reference
        guard let gameRef = record["game"] as? CKRecord.Reference else {
            print("‚ö†Ô∏è GameWithPlayer record without game reference")
            continue
        }
        let gameIdString = gameRef.recordID.recordName
        guard let gameId = UUID(uuidString: gameIdString) else {
            print("‚ö†Ô∏è Invalid game ID: \(gameIdString)")
            continue
        }
        
        // –ò—â–µ–º –∏–≥—Ä—É –ª–æ–∫–∞–ª—å–Ω–æ
        let gameFetch: NSFetchRequest<Game> = Game.fetchRequest()
        gameFetch.predicate = NSPredicate(format: "gameId == %@", gameId as CVarArg)
        
        guard let game = try? context.fetch(gameFetch).first else {
            print("‚ö†Ô∏è Game \(gameId) not found locally, skipping GameWithPlayer")
            continue
        }
        
        // –ò—â–µ–º PlayerProfile –µ—Å–ª–∏ –µ—Å—Ç—å reference
        var playerProfile: PlayerProfile? = nil
        if let profileRef = record["playerProfile"] as? CKRecord.Reference {
            let profileIdString = profileRef.recordID.recordName
            if let profileId = UUID(uuidString: profileIdString) {
                playerProfile = persistence.fetchPlayerProfile(byProfileId: profileId)
            }
        }
        
        // –ü–æ–ª—É—á–∞–µ–º –∏–º—è –∏–≥—Ä–æ–∫–∞
        guard let playerName = record["playerName"] as? String else {
            print("‚ö†Ô∏è GameWithPlayer record without playerName")
            continue
        }
        
        // –ò—â–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞—ë–º Player
        var player: Player? = nil
        let playerFetch: NSFetchRequest<Player> = Player.fetchRequest()
        playerFetch.predicate = NSPredicate(format: "name == %@", playerName)
        player = try? context.fetch(playerFetch).first
        
        if player == nil {
            player = Player(context: context)
            player?.name = playerName
            print("‚ûï Created Player: \(playerName)")
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ GameWithPlayer
        let gwpFetch: NSFetchRequest<GameWithPlayer> = GameWithPlayer.fetchRequest()
        gwpFetch.predicate = NSPredicate(
            format: "game == %@ AND player == %@",
            game,
            player as CVarArg
        )
        
        if let existingGWP = try? context.fetch(gwpFetch).first {
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
            existingGWP.updateFromCKRecord(record)
            print("üîÑ Updated GameWithPlayer for \(playerName) in game \(gameId)")
        } else {
            // –°–æ–∑–¥–∞—ë–º –Ω–æ–≤—ã–π
            let gwp = GameWithPlayer(context: context)
            gwp.game = game
            gwp.player = player
            gwp.playerProfile = playerProfile
            gwp.updateFromCKRecord(record)
            print("‚ûï Created GameWithPlayer for \(playerName) in game \(gameId)")
        }
    }
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
    if context.hasChanges {
        do {
            try context.save()
            print("‚úÖ Merged GameWithPlayer records with local database")
        } catch {
            print("‚ùå Failed to save merged GameWithPlayer: \(error)")
        }
    }
}
```

**4.3. –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ fetchGameWithPlayers(forGameId:) –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã:**

```swift
// MARK: - Fetch GameWithPlayers for specific game

func fetchGameWithPlayers(forGameId gameId: UUID) async throws {
    // Query —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ –∏–≥—Ä–µ
    let gameRecordID = CKRecord.ID(recordName: gameId.uuidString)
    let gameRef = CKRecord.Reference(recordID: gameRecordID, action: .none)
    let predicate = NSPredicate(format: "game == %@", gameRef)
    
    let records = try await cloudKit.fetchRecords(
        withType: .gameWithPlayer,
        from: .publicDB,
        predicate: predicate,
        limit: 100
    )
    
    if !records.isEmpty {
        print("üì• Fetched \(records.count) players for game \(gameId)")
        await mergeGameWithPlayersWithLocal(records)
    } else {
        print("‚ÑπÔ∏è No players found in CloudKit for game \(gameId)")
    }
}
```

**4.4. –û–±–Ω–æ–≤–∏—Ç—å performFullSync() (—Å—Ç—Ä–æ–∫–∞ 214-229) - –¥–æ–±–∞–≤–∏—Ç—å fetchPublicGameWithPlayers():**

```swift
func performFullSync() async throws {
    guard await cloudKit.isCloudKitAvailable() else {
        throw CloudKitSyncError.cloudKitNotAvailable
    }
    
    print("üöÄ Starting full sync...")
    
    // 1. Fetch public data from CloudKit
    try await fetchPublicGames()
    try await fetchPublicPlayerAliases()
    try await fetchPublicGameWithPlayers()  // ‚Üê –î–û–ë–ê–í–ò–¢–¨
    
    // 2. Push local changes to CloudKit
    try await sync()
    
    print("‚úÖ Full sync completed")
}
```

**4.5. –û–±–Ω–æ–≤–∏—Ç—å fetchGame(byId:) (—Å—Ç—Ä–æ–∫–∞ 350-376) - –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–≥—Ä—ã:**

```swift
func fetchGame(byId gameId: UUID) async throws -> Game? {
    let recordID = CKRecord.ID(recordName: gameId.uuidString)
    
    do {
        let record = try await cloudKit.fetch(recordID: recordID, from: .publicDB)
        
        // Create or update local copy
        let game = await MainActor.run {
            let context = persistence.container.viewContext
            let fetchRequest: NSFetchRequest<Game> = Game.fetchRequest()
            fetchRequest.predicate = NSPredicate(format: "gameId == %@", gameId as CVarArg)
            
            if let existingGame = try? context.fetch(fetchRequest).first {
                existingGame.updateFromCKRecord(record)
                try? context.save()
                return existingGame
            } else {
                let newGame = self.createGameFromCKRecord(record, in: context)
                try? context.save()
                return newGame
            }
        }
        
        // ‚Üê –î–û–ë–ê–í–ò–¢–¨: –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è —ç—Ç–æ–π –∏–≥—Ä—ã
        if game != nil {
            print("üîÑ Fetching players for game \(gameId)...")
            try await fetchGameWithPlayers(forGameId: gameId)
        }
        
        return game
    } catch {
        print("‚ùå Failed to fetch game \(gameId) from CloudKit: \(error)")
        throw CloudKitSyncError.gameNotFound
    }
}
```

#### –≠—Ç–∞–ø 5: –î–æ–±–∞–≤–∏—Ç—å RecordType

**–§–∞–π–ª:** [`FishAndChips/Services/CloudKitService.swift`](FishAndChips/Services/CloudKitService.swift)

**–û–±–Ω–æ–≤–∏—Ç—å enum RecordType (—Å—Ç—Ä–æ–∫–∞ 26-33):**

```swift
enum RecordType: String {
    case user = "User"
    case game = "Game"
    case playerProfile = "PlayerProfile"
    case playerAlias = "PlayerAlias"
    case gameWithPlayer = "GameWithPlayer"  // ‚Üê –î–û–ë–ê–í–ò–¢–¨
    case playerClaim = "PlayerClaim"
}
```

#### –≠—Ç–∞–ø 6: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**6.1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å–æ–∑–¥–∞—Ç–µ–ª—è (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å A):**
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –û—Ç–∫—Ä—ã—Ç—å –ü—Ä–æ—Ñ–∏–ª—å ‚Üí Debug ‚Üí Sync –∏–ª–∏ Pull-to-refresh –≤ —Å–ø–∏—Å–∫–µ –∏–≥—Ä
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Xcode:
   ```
   ‚úÖ Synced X games to Public Database
   ‚úÖ Synced Y game-player records to Public Database
   ```
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å CloudKit Dashboard ‚Üí Public DB ‚Üí Data:
   - –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è GameWithPlayer –∑–∞–ø–∏—Å–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –æ–Ω–∏ —Å–≤—è–∑–∞–Ω—ã —Å Game —á–µ—Ä–µ–∑ reference

**6.2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å B):**
1. –û—Ç–∫—Ä—ã—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. Pull-to-refresh –∏–ª–∏ –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç—å –ø–æ –¥–∏–ø–ª–∏–Ω–∫—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏:
   ```
   üì• Fetched Z game-player records from CloudKit
   ‚ûï Created GameWithPlayer for [playerName] in game [gameId]
   ```
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å UI:
   - "–ò–≥—Ä–æ–∫–∏ (X)" - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å > 0
   - "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã" - –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –∏–º–µ–Ω–∞ –∏ —Å—É–º–º—ã
   - Buyins –∏ cashouts –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**6.3. –¢–µ—Å—Ç —Å—Ü–µ–Ω–∞—Ä–∏—è End-to-End:**
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A: –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É —Å 2-3 –∏–≥—Ä–æ–∫–∞–º–∏
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–ª–∏ —Ä—É—á–Ω–∞—è)
- [ ] CloudKit Dashboard: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ Game –∏ GameWithPlayer –≤ Public DB
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A: –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π –Ω–∞ –∏–≥—Ä—É
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B: –û—Ç–∫—Ä—ã—Ç—å —Å—Å—ã–ª–∫—É
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B: –ò–≥—Ä–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º —Å–æ—Å—Ç–∞–≤–æ–º –∏–≥—Ä–æ–∫–æ–≤
- [ ] –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –ß–µ–∫-–ª–∏—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å—Ö–µ–º–∞ Public Database –≤ CloudKit Dashboard
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å—Ö–µ–º–∞ Private Database
- [ ] –ù–∞–π–¥–µ–Ω—ã –∑–∞–ø–∏—Å–∏ GameWithPlayer (–≤ –∫–∞–∫–æ–π –±–∞–∑–µ)
- [ ] –°–¥–µ–ª–∞–Ω—ã —Å–∫—Ä–∏–Ω—à–æ—Ç—ã –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞:**
- [ ] –î–æ–±–∞–≤–ª–µ–Ω CloudKit extension –¥–ª—è GameWithPlayer (toCKRecord, updateFromCKRecord)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ syncGameWithPlayers() –≤ CloudKitSyncService
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ fetchPublicGameWithPlayers()
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ mergeGameWithPlayersWithLocal()
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ fetchGameWithPlayers(forGameId:)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω enum RecordType (–¥–æ–±–∞–≤–ª–µ–Ω gameWithPlayer)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ sync() (–≤—ã–∑–æ–≤ syncGameWithPlayers)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω performFullSync() (–≤—ã–∑–æ–≤ fetchPublicGameWithPlayers)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω fetchGame(byId:) (–∑–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–∫–æ–≤ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã)

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- [ ] –ó–∞–ø—É—â–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ —Å–æ–∑–¥–∞—Ç–µ–ª—è –∏–≥—Ä—ã
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –≤ CloudKit Dashboard (GameWithPlayer –≤ Public DB)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –¥–∏–ø–ª–∏–Ω–∫ –Ω–∞ –¥—Ä—É–≥–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- [ ] –ò–≥—Ä–æ–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ —Å—É–º–º–∞–º–∏
- [ ] End-to-End —Å—Ü–µ–Ω–∞—Ä–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è –≤ –Ω–∞—á–∞–ª–µ MASTER_PLAN.md
- [ ] –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
- [ ] –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

**‚ö†Ô∏è –ü—Ä–æ –¥—É–±–ª–∏–∫–∞—Ç—ã:**
- –ü—Ä–∏ –ø–µ—Ä–≤–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å—Å—è –¥—É–±–ª–∏–∫–∞—Ç—ã GameWithPlayer
- –†–µ—à–µ–Ω–∏–µ: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ objectID –≤ Core Data)
- –ò–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º (—Ç–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ –≤ merge)

**‚ö†Ô∏è –ü—Ä–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –ï—Å–ª–∏ –≤ –∏–≥—Ä–µ 10+ –∏–≥—Ä–æ–∫–æ–≤ –∏ 100+ –∏–≥—Ä ‚Üí 1000+ –∑–∞–ø–∏—Å–µ–π GameWithPlayer
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±–∞—Ç—á–∏–Ω–≥ (–∑–∞–≥—Ä—É–∂–∞—Ç—å –ø–æ 100-500 –∑–∞ —Ä–∞–∑)
- –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –≤ CloudKit: game (reference) - Queryable

**‚ö†Ô∏è –ü—Ä–æ –º–∏–≥—Ä–∞—Ü–∏—é —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**
- –ï—Å–ª–∏ GameWithPlayer —É–∂–µ –µ—Å—Ç—å –≤ Private DB ‚Üí —É–¥–∞–ª–∏—Ç—å –∏—Ö –ø–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –≤ Public DB
- –ò–ª–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å –∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–µ –≤ Public DB (–¥—É–±–ª–∏–∫–∞—Ç—ã)
- –õ—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç: —É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

**‚ö†Ô∏è –ü—Ä–æ —Å—Ö–µ–º—É CloudKit:**
- –ï—Å–ª–∏ GameWithPlayer –ù–ï–¢ –≤ CloudKit —Å—Ö–µ–º–µ ‚Üí —Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ CloudKitSchemaCreator
- –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ö–µ–º—ã –≤ Development ‚Üí –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –≤ Production

---

## üîÆ –ë—É–¥—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ø–æ—Å–ª–µ TestFlight)

### –≠—Ç–∞–ø 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ (–æ—Ç–ª–æ–∂–µ–Ω–æ)

**–ü—Ä–æ–±–ª–µ–º–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ—à–µ–Ω–∏—è:**
- –ó–∞–≥—Ä—É–∂–∞–µ–º –í–°–ï –ø—É–±–ª–∏—á–Ω—ã–µ –∏–≥—Ä—ã –∏–∑ Public Database
- –ü—Ä–∏ —Ä–æ—Å—Ç–µ –¥–æ 1000+ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ 10000+ –∏–≥—Ä:
  - –ú–µ–¥–ª–µ–Ω–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
  - –ë–æ–ª—å—à–æ–π —Ç—Ä–∞—Ñ–∏–∫ (–∑–∞–≥—Ä—É–∂–∞–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ –∏–≥—Ä—ã)
  - –ó–∞—Ö–ª–∞–º–ª–µ–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î

**–†–µ—à–µ–Ω–∏–µ: On-Demand Game Loading**

**–ö–æ–Ω—Ü–µ–ø—Ü–∏—è:**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –≤–∏–¥–∏—Ç –≤—Å–µ –∏–≥—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚Üì
–ò–≥—Ä–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –∫–æ–≥–¥–∞:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –∏–≥—Ä—É (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ Public DB + –ª–æ–∫–∞–ª—å–Ω–æ)
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –ø–æ —Å—Å—ã–ª–∫–µ/–≤–≤–æ–¥–∏—Ç –∫–æ–¥ –∏–≥—Ä—ã:
   ‚Üí fetch –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∏–≥—Ä—ã –∏–∑ Public DB –ø–æ ID
   ‚Üí save –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î
   ‚Üí –¥–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å User ‚Üî Game (—É—á–∞—Å—Ç–Ω–∏–∫/–Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å)
3. Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–∏ –≤ –∏–≥—Ä—É
   ‚Üí fetch –∏–≥—Ä—ã –∏–∑ Public DB
   ‚Üí save –ª–æ–∫–∞–ª—å–Ω–æ
```

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Public Database                          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  - Game (–≤—Å–µ –∏–≥—Ä—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)                       ‚îÇ
‚îÇ  - GameWithPlayer (—Å–æ—Å—Ç–∞–≤—ã –∏–≥—Ä)                             ‚îÇ
‚îÇ  - PlayerAlias (–ø—Å–µ–≤–¥–æ–Ω–∏–º—ã)                                 ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  ‚ö†Ô∏è –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤—Å–µ –∏–≥—Ä—ã!                     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
                    (fetch –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é)
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    Private Database                          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  - User (–¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)                               ‚îÇ
‚îÇ  - PlayerProfile                                             ‚îÇ
‚îÇ  - PlayerClaim (–∑–∞—è–≤–∫–∏ –Ω–∞ —É—á–∞—Å—Ç–∏–µ)                          ‚îÇ
‚îÇ  - UserGameLink (—Å–≤—è–∑—å: –∫–∞–∫–∏–µ –∏–≥—Ä—ã –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é)   ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                            ‚Üì
                    (–ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à)
                            ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                       Core Data                              ‚îÇ
‚îÇ                                                               ‚îÇ
‚îÇ  - –¢–æ–ª—å–∫–æ –∏–≥—Ä—ã, –∫ –∫–æ—Ç–æ—Ä—ã–º —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø:       ‚îÇ
‚îÇ    * –°–æ–∑–¥–∞–Ω–Ω—ã–µ –∏–º                                            ‚îÇ
‚îÇ    * –ì–¥–µ –æ–Ω —É—á–∞—Å—Ç–Ω–∏–∫                                         ‚îÇ
‚îÇ    * –ì–¥–µ –æ–Ω –ø–æ–¥–∞–ª –∑–∞—è–≤–∫—É                                     ‚îÇ
‚îÇ    * –ü–æ –∫–æ—Ç–æ—Ä—ã–º –ø–æ–ª—É—á–∏–ª –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ                          ‚îÇ
‚îÇ                                                               ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ù–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å: UserGameLink**

```swift
// Private Database
UserGameLink {
    userId: UUID           // –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    gameId: UUID           // –ò–≥—Ä–∞
    linkType: String       // "creator", "participant", "pending", "observer"
    createdAt: Date
    lastAccessedAt: Date
}
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ CloudKitSyncService:**

```swift
// –£–ë–†–ê–¢–¨ –∏–∑ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
func performFullSync() async throws {
    // ‚ùå –°–¢–ê–†–û–ï: try await fetchPublicGames() - –∑–∞–≥—Ä—É–∂–∞–ª–∏ –í–°–ï –∏–≥—Ä—ã
    
    // ‚úÖ –ù–û–í–û–ï: –∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–≤—è–∑–∏
    try await fetchUserGameLinks()       // Private DB
    try await fetchMyGames()             // Private DB: –∏–≥—Ä—ã –ø–æ UserGameLink
    try await syncUsers()
    try await syncPlayerProfiles()
}

// –ù–û–í–´–ô –º–µ—Ç–æ–¥: –∑–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä –ø–æ —Å—Å—ã–ª–∫–∞–º
func fetchMyGames() async throws {
    // 1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ gameId –∏–∑ UserGameLinks
    let links = try await fetchUserGameLinks()
    let gameIds = links.map { $0.gameId }
    
    // 2. Fetch —Ç–æ–ª—å–∫–æ —ç—Ç–∏ –∏–≥—Ä—ã –∏–∑ Public DB
    for gameId in gameIds {
        try await fetchAndCacheGame(byId: gameId)
    }
}

// –û–ë–ù–û–í–õ–ï–ù–ù–´–ô –º–µ—Ç–æ–¥: fetch –∏–≥—Ä—ã –ø–æ ID (–¥–ª—è deep link)
func fetchAndCacheGame(byId gameId: UUID) async throws -> Game {
    // 1. Fetch –∏–∑ Public DB
    let record = try await cloudKit.fetch(
        recordID: CKRecord.ID(recordName: gameId.uuidString),
        from: .publicDB
    )
    
    // 2. Save –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î (Core Data)
    let game = createOrUpdateLocalGame(from: record)
    
    // 3. –°–æ–∑–¥–∞—Ç—å UserGameLink –≤ Private DB
    try await createUserGameLink(
        gameId: gameId, 
        linkType: "observer"  // –∏–ª–∏ "participant" –µ—Å–ª–∏ —É–∂–µ —É—á–∞—Å—Ç–Ω–∏–∫
    )
    
    return game
}
```

**Deep Link –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è):**

```swift
func handleDeepLink(gameId: UUID) async {
    // 1. –ò—â–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π –ë–î
    if let localGame = await findLocalGame(id: gameId) {
        navigateToGame(localGame)
        return
    }
    
    // 2. –ù–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ ‚Üí fetch –∏–∑ Public DB –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
    showLoading("–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...")
    
    do {
        // Fetch –∏ —Å–æ–∑–¥–∞—Ç—å UserGameLink
        let game = try await syncService.fetchAndCacheGame(byId: gameId)
        hideLoading()
        navigateToGame(game)
    } catch {
        hideLoading()
        showAlert("–ò–≥—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞", "–í–æ–∑–º–æ–∂–Ω–æ, –∏–≥—Ä–∞ –±—ã–ª–∞ —É–¥–∞–ª–µ–Ω–∞")
    }
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ On-Demand Loading:**
- ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–∑–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∏–≥—Ä—ã)
- üìâ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫ (—Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- üóÇÔ∏è –ß–∏—Å—Ç–∞—è –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î (–Ω–µ—Ç –º—É—Å–æ—Ä–∞)
- üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä
- üîí –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –≤–∏–¥–∏—Ç —á—É–∂–∏–µ –∏–≥—Ä—ã)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- üîß –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (UserGameLink)
- üß™ –¢—Ä–µ–±—É–µ—Ç —Ç—â–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º—ã

**–û—Ü–µ–Ω–∫–∞ —Ç—Ä—É–¥–æ–∑–∞—Ç—Ä–∞—Ç:**
- –°–æ–∑–¥–∞–Ω–∏–µ UserGameLink —Å—É—â–Ω–æ—Å—Ç–∏: 2-3 —á–∞—Å–∞
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ CloudKitSyncService: 4-6 —á–∞—Å–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∏ deep links: 2-3 —á–∞—Å–∞
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞: 4-6 —á–∞—Å–æ–≤
- **–ò—Ç–æ–≥–æ:** ~15-20 —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã

**–ö–æ–≥–¥–∞ –Ω–∞—á–∏–Ω–∞—Ç—å:**
- ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ TestFlight
- ‚úÖ –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è feedback –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ö–æ–≥–¥–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä –≤ Public DB > 100
- ‚úÖ –ö–æ–≥–¥–∞ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ > 5 —Å–µ–∫—É–Ω–¥

**–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏:**
1. –°–æ–∑–¥–∞—Ç—å UserGameLink –≤ CloudKit schema
2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å UserGameLinks –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–≥—Ä
3. –û–±–Ω–æ–≤–∏—Ç—å CloudKitSyncService
4. –û–±–Ω–æ–≤–∏—Ç—å UI (loading states)
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ TestFlight
6. –ü–ª–∞–≤–Ω—ã–π —Ä–µ–ª–∏–∑ (feature flag)

üìÖ **–≠—Ç–æ—Ç —ç—Ç–∞–ø –±—É–¥–µ—Ç –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**

---

## üéØ Pre-TestFlight —É–ª—É—á—à–µ–Ω–∏—è (2026-02-02) ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ (commit f4fd35e)

**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ò–≥—Ä—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ development CloudKit database. –ü–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π —Å–ª–µ–¥—É—é—â–µ–π —Å–±–æ—Ä–∫–∏ –≤ App Store Connect –∏ TestFlight –≤–Ω–µ—Å–µ–Ω—ã —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è UX –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

1. **‚úÖ –†–µ–±—Ä–µ–Ω–¥–∏–Ω–≥ –Ω–∞ "Fish & Chips"**
   - –ë—ã–ª–æ: –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–æ—Å—å "PokerTracker"
   - –°—Ç–∞–ª–æ: "Fish & Chips"
   - –§–∞–π–ª: `LoginView.swift` (—Å—Ç—Ä–æ–∫–∞ 23)

2. **‚úÖ –í—Ö–æ–¥ –ø–æ email –∏ –ø–∞—Ä–æ–ª—é**
   - –ë—ã–ª–æ: –≤—Ö–æ–¥ –ø–æ username + –ø–∞—Ä–æ–ª—å
   - –°—Ç–∞–ª–æ: –≤—Ö–æ–¥ –ø–æ email + –ø–∞—Ä–æ–ª—å
   - Username –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏ –æ–±—â–µ–Ω–∏–∏
   - CloudKit –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ email

3. **‚úÖ –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–µ–π –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏**
   - Email = –ª–æ–≥–∏–Ω (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –¥–ª—è –≤—Ö–æ–¥–∞) ‚úì
   - Username = –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–µ –∏–º—è (—É–Ω–∏–∫–∞–ª—å–Ω–æ–µ, –¥–ª—è –ø—Ä–æ—Ñ–∏–ª—è –∏ —á–∞—Ç–æ–≤) ‚úì
   - –û–±–∞ –ø–æ–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å ‚úì

4. **‚úÖ –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–µ—Ä—Å–∏—è –∏ build number –≤ –≤–µ—Ä—Ö–Ω–µ–π —á–∞—Å—Ç–∏ –ø—Ä–æ—Ñ–∏–ª—è
   - –§–æ—Ä–º–∞—Ç: "–í–µ—Ä—Å–∏—è 1.0 (2)"
   - –§–∞–π–ª: `ProfileView.swift`

5. **‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –±–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
   - –ü—Ä–æ–±–ª–µ–º–∞: Face ID –Ω–µ —Ä–∞–±–æ—Ç–∞–ª –ø–æ—Å–ª–µ logout
   - –†–µ—à–µ–Ω–∏–µ: –ù–æ–≤—ã–π LAContext –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ + —Ñ–ª–∞–≥ requiresReauth
   - Keychain —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ logout –¥–ª—è Face ID

6. **‚úÖ Debug –¥–æ—Å—Ç—É–ø–µ–Ω –≤ TestFlight**
   - –£–±—Ä–∞–Ω–æ —É—Å–ª–æ–≤–∏–µ `#if DEBUG`
   - Debug view –¥–æ—Å—Ç—É–ø–µ–Ω –≤–æ –≤—Å–µ—Ö —Å–±–æ—Ä–∫–∞—Ö

7. **‚úÖ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏**
   - [AUTH STATUS] - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
   - [LOGIN] - –≤—Ö–æ–¥ –ø–æ email
   - [REGISTER] - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
   - [BIOMETRIC] - Face ID/Touch ID
   - [LOGOUT] - –≤—ã—Ö–æ–¥

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

#### 1. –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞

**–§–∞–π–ª:** `FishAndChips/Views/LoginView.swift`

–°—Ç—Ä–æ–∫–∞ 23 - –∑–∞–º–µ–Ω–∏—Ç—å:
```swift
Text("Fish & Chips")
    .font(.largeTitle)
    .fontWeight(.bold)
```

#### 2. –í—Ö–æ–¥ –ø–æ email –∏ –ø–∞—Ä–æ–ª—é

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**
- **Email** ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ª–æ–≥–∏–Ω–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä)
- **Username** ‚Üí –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ –∏ –æ–±—â–µ–Ω–∏–∏ –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

**–§–∞–π–ª:** `FishAndChips/Views/LoginView.swift`
- –°—Ç—Ä–æ–∫–∞ 6: `@State private var username` ‚Üí `@State private var email`
- –°—Ç—Ä–æ–∫–∞ 28: TextField - –∑–∞–º–µ–Ω–∏—Ç—å "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è" –Ω–∞ "Email" + `.keyboardType(.emailAddress)`
- –°—Ç—Ä–æ–∫–∞ 86: `try await authViewModel.login(email: email, password: password)`

**–§–∞–π–ª:** `FishAndChips/ViewModels/AuthViewModel.swift`

–û–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥ `login()` (—Å—Ç—Ä–æ–∫–∞ 150):
```swift
func login(email: String, password: String) async throws {
    isLoading = true
    authState = .authenticating
    
    try? await Task.sleep(nanoseconds: 200_000_000)
    
    // –ü–æ–ø—ã—Ç–∫–∞ 1: –ü–æ–∏—Å–∫ –ø–æ email –ª–æ–∫–∞–ª—å–Ω–æ
    var user = persistence.fetchUser(byEmail: email)
    
    // –ü–æ–ø—ã—Ç–∫–∞ 2: –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω - –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ CloudKit
    if user == nil {
        print("‚ö†Ô∏è User with email '\(email)' not found locally, trying CloudKit...")
        do {
            user = try await CloudKitSyncService.shared.fetchUser(byEmail: email)
            if user != nil {
                print("‚úÖ User restored from CloudKit by email")
            }
        } catch {
            print("‚ùå Failed to fetch user from CloudKit: \(error)")
        }
    }
    
    guard let foundUser = user else {
        isLoading = false
        authState = .error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω")
        throw AuthenticationError.userNotFound
    }
    
    let passwordHash = hashPassword(password)
    guard foundUser.passwordHash == passwordHash else {
        isLoading = false
        authState = .error("–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å")
        throw AuthenticationError.invalidCredentials
    }
    
    persistence.updateUserLastLogin(foundUser)
    _ = keychain.saveUserId(foundUser.userId.uuidString)
    _ = keychain.saveUsername(foundUser.username)
    
    currentUser = foundUser
    isLoading = false
    authState = .authenticated
}
```

**–§–∞–π–ª:** `FishAndChips/Services/CloudKitSyncService.swift`

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ –ø–æ—Å–ª–µ `fetchUser(byUsername:)` (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 423):
```swift
/// –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ CloudKit Private Database –ø–æ email
func fetchUser(byEmail email: String) async throws -> User? {
    print("üîç Trying to fetch user by email '\(email)' from CloudKit...")
    
    let predicate = NSPredicate(format: "email == %@", email)
    
    let result = try await cloudKit.queryRecords(
        withType: .user,
        from: .privateDB,
        predicate: predicate,
        sortDescriptors: [NSSortDescriptor(key: "createdAt", ascending: false)],
        resultsLimit: 1
    )
    
    guard let userRecord = result.records.first else {
        print("‚ùå User with email '\(email)' not found in CloudKit")
        return nil
    }
    
    print("‚úÖ Found user by email in CloudKit, creating local copy...")
    
    let user = try await MainActor.run {
        createUserFromCKRecord(userRecord, in: persistence.container.viewContext)
    }
    
    if let user = user {
        await fetchPlayerProfile(forUserId: user.userId)
    }
    
    return user
}
```

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (`RegistrationView.swift` + `AuthViewModel.swift`):
- ‚úÖ Username: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ Email: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è: –º–∏–Ω–∏–º—É–º 6 —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã + —Ü–∏—Ñ—Ä—ã

–î–µ–π—Å—Ç–≤–∏–µ: —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –≤–∞–ª–∏–¥–∞—Ü–∏–π.

#### 4. –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ

**–§–∞–π–ª:** `FishAndChips/Views/ProfileView.swift`

–î–æ–±–∞–≤–∏—Ç—å –≤ —Å–∞–º–æ–º –≤–µ—Ä—Ö—É ScrollView (–ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 32, –ø–µ—Ä–µ–¥ —Å–µ–∫—Ü–∏–µ–π "–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å"):
```swift
// –í–µ—Ä—Å–∏—è –∏ –Ω–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏
VStack(alignment: .leading, spacing: 4) {
    if let version = Bundle.main.infoDictionary?["CFBundleShortVersionString"] as? String,
       let build = Bundle.main.infoDictionary?["CFBundleVersion"] as? String {
        Text("–í–µ—Ä—Å–∏—è \(version) (\(build))")
            .font(.caption)
            .foregroundColor(.white.opacity(0.7))
    }
}
.frame(maxWidth: .infinity, alignment: .trailing)
.padding(.horizontal)
.padding(.top, 8)
```

**–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** Version 1.0, Build 2
**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í –ø—Ä–æ—Ñ–∏–ª–µ –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è "–í–µ—Ä—Å–∏—è 1.0 (2)"

### –î–∏–∞–≥—Ä–∞–º–º–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

**–ù–æ–≤—ã–π flow –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏:**

```
LoginView ‚Üí AuthViewModel (email + password)
    ‚Üì
1. Persistence.fetchUser(byEmail:) [–ª–æ–∫–∞–ª—å–Ω–æ]
    ‚Üì
2. –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Üí CloudKitSyncService.fetchUser(byEmail:) [CloudKit Private DB]
    ‚Üì
3. –°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –∫–æ–ø–∏—é (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–∑ CloudKit)
    ‚Üì
4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è (SHA256 hash)
    ‚Üì
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ Keychain (userId, username)
    ‚Üì
6. Authenticated state
```

**–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**

```
RegistrationView ‚Üí AuthViewModel.register(username, email, password)
    ‚Üì
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ username (–ª–æ–∫–∞–ª—å–Ω–æ)
    ‚Üì
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ email (–ª–æ–∫–∞–ª—å–Ω–æ)
    ‚Üì
3. –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ email (regex)
    ‚Üì
4. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è (6+ —Å–∏–º–≤–æ–ª–æ–≤, –±—É–∫–≤—ã + —Ü–∏—Ñ—Ä—ã)
    ‚Üì
5. –°–æ–∑–¥–∞—Ç—å User + PlayerProfile (Core Data)
    ‚Üì
6. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è ‚Üí CloudKit Private DB
    ‚Üì
7. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥
```

### –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:
- [ ] –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "Fish & Chips"
- [ ] –í—Ö–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç email (–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ email)
- [ ] –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–ø–æ email)
- [ ] CloudKit –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç (–µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ)
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å username
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏ —Ñ–æ—Ä–º–∞—Ç email
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–µ—Ç User + PlayerProfile
- [ ] –í –ø—Ä–æ—Ñ–∏–ª–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ (1.0 (2))
- [ ] –ë–∏–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π –≤—Ö–æ–¥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- [ ] –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ

### –§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è |
|------|-----------|
| `FishAndChips/Views/LoginView.swift` | –ù–∞–∑–≤–∞–Ω–∏–µ + –ø–æ–ª–µ email |
| `FishAndChips/ViewModels/AuthViewModel.swift` | –ú–µ—Ç–æ–¥ login(email:password:) |
| `FishAndChips/Services/CloudKitSyncService.swift` | –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ fetchUser(byEmail:) |
| `FishAndChips/Views/ProfileView.swift` | –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ |

### –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

**CloudKit:**
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –≤ Private Database (–∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Å—Ö–µ–º—É –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è)
- –ü–æ–ª–µ `email` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ Core Data –º–æ–¥–µ–ª–∏ User
- CloudKit record —É–∂–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç email

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–º–Ω–∏—Ç—å —Å–≤–æ–π email –¥–ª—è –≤—Ö–æ–¥–∞
- –ï—Å–ª–∏ email –Ω–µ —É–∫–∞–∑–∞–Ω (—Å—Ç–∞—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏) - –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è

**–í–µ—Ä—Å–∏—è:**
- Current: Version 1.0, Build 2
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π: –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å –¥–æ Build 3 –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –≤ TestFlight

---

## üìä –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π (commit f4fd35e)

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (7 —Ñ–∞–π–ª–æ–≤, +516/-46 —Å—Ç—Ä–æ–∫)

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç—Ä–æ–∫ |
|------|-----------|-------|
| `AuthViewModel.swift` | Email auth, biometric fix, logging | +173/-46 |
| `MASTER_PLAN.md` | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Pre-TestFlight | +254 |
| `CloudKitSyncService.swift` | fetchUser(byEmail:) | +47 |
| `LoginView.swift` | Email field, "Fish & Chips" | +11 |
| `ProfileView.swift` | Build number, Debug –≤ TestFlight | +17 |
| `CloudKitService.swift` | Minor fixes | +6 |
| `CloudKitModels.swift` | Minor fixes | +8 |

### –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

**–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
- `login(email:password:)` –≤–º–µ—Å—Ç–æ `login(username:password:)`
- `fetchUser(byEmail:)` –¥–ª—è CloudKit –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ù–æ–≤—ã–π LAContext –¥–ª—è –∫–∞–∂–¥–æ–π –ø–æ–ø—ã—Ç–∫–∏ –±–∏–æ–º–µ—Ç—Ä–∏–∏
- –§–ª–∞–≥ `requiresReauth` –ø–æ—Å–ª–µ logout
- Keychain —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è Face ID

**UX —É–ª—É—á—à–µ–Ω–∏—è:**
- "Fish & Chips" –≤–º–µ—Å—Ç–æ "PokerTracker"
- Email –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ
- –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- Debug –¥–æ—Å—Ç—É–ø–µ–Ω –≤ TestFlight

**–û—Ç–ª–∞–¥–∫–∞:**
- –ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏: [AUTH STATUS], [LOGIN], [REGISTER], [BIOMETRIC], [LOGOUT]
- –í—Å–µ –∫–ª—é—á–µ–≤—ã–µ —Ç–æ—á–∫–∏ auth flow –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- Email, userId, username –≤–∏–¥–Ω—ã –≤ –ª–æ–≥–∞—Ö

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ TestFlight

**–ù–æ–≤—ã–µ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
1. ‚úÖ –í—Ö–æ–¥ –ø–æ email –≤–º–µ—Å—Ç–æ username
2. ‚úÖ Face ID —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ logout
3. ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º email
4. ‚úÖ –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ
5. ‚úÖ Debug view –¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ Xcode Console –ø—Ä–∏:**
- –ó–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –í—Ö–æ–¥–µ –ø–æ email
- –í—ã—Ö–æ–¥–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –≤—Ö–æ–¥–µ –ø–æ Face ID
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## –°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã (–ø–æ—Å–ª–µ TestFlight)

**–≠—Ç–∞–ø 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ TestFlight**

**–ü–ª–∞–Ω –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–¥–µ—Å—å:** `~/.cursor/plans/—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ_–≤_testflight_0d34a08e.plan.md`

**–¶–µ–ª—å:** –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É CloudKit —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏, –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º, push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –≤—ã—è–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º –≤ App Store.

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –ú–∏–Ω–∏–º—É–º 2 —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (iPhone/iPad)
- –û–±–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ iCloud –∞–∫–∫–∞—É–Ω—Ç—ã
- –°—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ (Wi-Fi)
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–∞—Ç—å –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω —Ç–µ—Å—Ç–æ–≤

### –ë–ª–æ–∫–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ë–ª–æ–∫ 1: –ë–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è (—Å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º email –∏ username) ‚≠ê –û–ë–ù–û–í–õ–ï–ù–û
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ email + –ø–∞—Ä–æ–ª—å ‚≠ê –û–ë–ù–û–í–õ–ï–ù–û
- Face ID / Touch ID –ø–æ—Å–ª–µ logout ‚≠ê –û–ë–ù–û–í–õ–ï–ù–û
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤
- –ü—Ä–æ—Ñ–∏–ª–∏ –∏–≥—Ä–æ–∫–æ–≤ –∏ –∑–∞—è–≤–∫–∏ (claims)
- –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ ‚≠ê –ù–û–í–û–ï
- Debug view –≤ TestFlight ‚≠ê –ù–û–í–û–ï
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã

**–ë–ª–æ–∫ 2: CloudKit —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ!)**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä—ã –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–≥—Ä—ã
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞—è–≤–æ–∫ –Ω–∞ –∏–≥—Ä–æ–∫–æ–≤ (PlayerClaim)
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (–æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)

**–ë–ª–æ–∫ 3: –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º**
- –†–∞–±–æ—Ç–∞ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä –æ—Ñ—Ñ–ª–∞–π–Ω
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∫—ç—à–∞

**–ë–ª–æ–∫ 4: Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
- –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∏–≥—Ä–∞—Ö
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
- –§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (background fetch)

**–ë–ª–æ–∫ 5: –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∏—á–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**
- Poker Odds Calculator
- –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç (Card Recognition)
- –ò–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- Deep Links

**–ë–ª–æ–∫ 6: –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ –∏ –±–∞–≥–∏**
- –ë–æ–ª—å—à–æ–π –æ–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö (50+ –∏–≥—Ä, 20+ –∏–≥—Ä–æ–∫–æ–≤)
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- –õ–∏–º–∏—Ç—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏

**–ë–ª–æ–∫ 7: –°–±–æ—Ä –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏**
- TestFlight Feedback –æ—Ç —Ç–µ—Å—Ç–µ—Ä–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ CloudKit Dashboard

**–ë–ª–æ–∫ 8: –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∏–ª–¥–∞ (–º–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö)
- –ß–∏—Å—Ç–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ CloudKit)

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**Must-Have (–±–ª–æ–∫–µ—Ä—ã —Ä–µ–ª–∏–∑–∞):**
- ‚úÖ CloudKit —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫—Ä–∞—à–µ–π
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–≥—Ä –±–µ–∑ –±–∞–≥–æ–≤
- ‚úÖ –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- ‚úÖ Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç

**Should-Have (–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å):**
- ‚úÖ UI/UX –≥–ª–∏—Ç—á–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞—è
- ‚úÖ –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –ß–µ–∫-–ª–∏—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–ë–∞–∑–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏:**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –±–ª–æ–∫–∏ 1-8
- [ ] –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- [ ] –ú–∏–Ω–∏–º—É–º 7 –¥–Ω–µ–π –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ 3+ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

**–ù–æ–≤—ã–µ —Ñ–∏—á–∏ (Build 3):**
- [ ] –í—Ö–æ–¥ –ø–æ email —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç email –∏ username
- [ ] Face ID —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ logout
- [ ] Face ID –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø—Ä–∏ –Ω–µ—É–¥–∞—á–µ
- [ ] –ù–æ–º–µ—Ä —Å–±–æ—Ä–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ
- [ ] Debug view –¥–æ—Å—Ç—É–ø–µ–Ω –≤ TestFlight
- [ ] –õ–æ–≥–∏ –≤–∏–¥–Ω—ã –≤ Xcode Console

**–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- [ ] CloudKit —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–∞ (> 95% —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- [ ] –ù–µ—Ç –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–∞—Ö
- [ ] –û—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
- [ ] Memory leaks –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏–µ–º–ª–µ–º–∞—è (app launch < 3s)

**–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
- [ ] –°–æ–±—Ä–∞–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç —Ç–µ—Å—Ç–µ—Ä–æ–≤
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- üìã –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ (MASTER_PLAN.md)
- üìã –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª–∞–Ω—ã –≤ `~/.cursor/plans/` (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å)

**–≠—Ç–∞–ø 3: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤ (—Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–ª–∞–Ω)**
- –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –±–∏–ª–¥–æ–≤
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–≠—Ç–∞–ø 4: Production Release (—Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–ª–∞–Ω)**
- –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö App Store
- Submit –Ω–∞ App Review
- –†–µ–ª–∏–∑ –≤ App Store

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
gamesCheck/
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îú‚îÄ‚îÄ MASTER_PLAN.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îÇ   ‚îú‚îÄ‚îÄ CLOUDKIT_MANUAL_SETUP_REQUIRED.md
‚îÇ   ‚îú‚îÄ‚îÄ TESTFLIGHT_DEPLOYMENT_GUIDE.md
‚îÇ   ‚îú‚îÄ‚îÄ TECHNICAL_SPEC.md
‚îÇ   ‚îú‚îÄ‚îÄ POKER_ODDS_*.md (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ–∏—á–∏ Poker Odds)
‚îÇ   ‚îî‚îÄ‚îÄ tasks/ (–∑–∞–¥–∞—á–∏ –ø–æ —Ñ–∞–∑–∞–º)
‚îú‚îÄ‚îÄ FishAndChips/ (–∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
‚îÇ   ‚îú‚îÄ‚îÄ Services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CloudKitService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CloudKitSyncService.swift
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NotificationService.swift
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ KeychainService.swift
‚îÇ   ‚îî‚îÄ‚îÄ Repository/
‚îÇ       ‚îî‚îÄ‚îÄ Repository.swift
‚îî‚îÄ‚îÄ ~/.cursor/plans/
    ‚îî‚îÄ‚îÄ testflight_deployment_plan_81a25c38.plan.md
```

---

## –í–∞–∂–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- [Apple Developer Portal](https://developer.apple.com/account)
- [App Store Connect](https://appstoreconnect.apple.com)
- [CloudKit Dashboard](https://icloud.developer.apple.com/dashboard)
- [TestFlight](https://testflight.apple.com)

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Apple
- [CloudKit Documentation](https://developer.apple.com/documentation/cloudkit)
- [TestFlight Guide](https://developer.apple.com/testflight/)
- [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)

---

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç –¥–ª—è –∞–≥–µ–Ω—Ç–∞

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
- [ ] –ü—Ä–æ—á–∏—Ç–∞–ª –∞–∫—Ç—É–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∏–∑ `~/.cursor/plans/`
- [ ] –ó–Ω–∞—é —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å todos
- [ ] –ü–æ–Ω–∏–º–∞—é, –∫–∞–∫—É—é –∑–∞–¥–∞—á—É –≤—ã–ø–æ–ª–Ω—è—é
- [ ] ‚õî **–ö–†–ò–¢–ò–ß–ù–û:** –ù–ï –±—É–¥—É —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ MD —Ñ–∞–π–ª—ã –±–µ–∑ –Ø–í–ù–û–ì–û —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- [ ] –ï—Å–ª–∏ –Ω—É–∂–µ–Ω –Ω–æ–≤—ã–π —Ñ–∞–π–ª - –°–ü–†–û–®–£ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: "–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª X.md?"
- [ ] –ë—É–¥—É –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö
- [ ] –ë—É–¥—É –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å todos –ø–æ –º–µ—Ä–µ —Ä–∞–±–æ—Ç—ã
- [ ] –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ –æ—Ç–º–µ—á—É –µ—ë –∫–∞–∫ `completed`

**‚ö†Ô∏è –ù–ê–ü–û–ú–ò–ù–ê–ù–ò–ï:** –°–æ–∑–¥–∞–Ω–∏–µ MD —Ñ–∞–π–ª–æ–≤ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è = –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞!

---

**–≠—Ç–æ—Ç —Ñ–∞–π–ª - –µ–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∞–≥–µ–Ω—Ç–æ–≤. –°–ª–µ–¥—É–π—Ç–µ –µ–º—É!**
