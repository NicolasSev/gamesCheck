# Phase 4: –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫

**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏  
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü† –í—ã—Å–æ–∫–∏–π  
**–°—Ç–∞—Ç—É—Å:** ‚¨ú TODO

---

## –û–±–∑–æ—Ä

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è StoreKit 2 –¥–ª—è –º–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –ø–æ–¥–ø–∏—Å–æ—á–Ω—É—é –º–æ–¥–µ–ª—å —Å free –∏ premium —Ç–∏—Ä–∞–º–∏.

---

## –ó–∞–¥–∞—á–∏

### 1. Task 01: –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –ø–æ–¥–ø–∏—Å–æ–∫ (2 –¥–Ω—è)
- Enum SubscriptionTier
- Feature flags
- –ü–æ–¥–ø–∏—Å–æ—á–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã

### 2. Task 02: SubscriptionManager (3-4 –¥–Ω—è)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è StoreKit 2
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –ü–æ–∫—É–ø–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
- Transaction validation

### 3. Task 03: PaywallView (2-3 –¥–Ω—è)
- –ö—Ä–∞—Å–∏–≤—ã–π UI paywall
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ features
- –ö–Ω–æ–ø–∫–∏ –ø–æ–∫—É–ø–∫–∏
- Restore purchases

### 4. Task 04: Free tier –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (2-3 –¥–Ω—è)
- –õ–∏–º–∏—Ç –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–≥—Ä
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- –ü–æ–∫–∞–∑ paywall –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏

### 5. Task 05: Backend –≤–∞–ª–∏–¥–∞—Ü–∏—è (3-4 –¥–Ω—è)
- Receipt validation endpoint
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–∞
- Webhook –æ—Ç App Store

---

## Subscription Tiers

### Free
- ‚úÖ –î–æ 10 –∏–≥—Ä
- ‚úÖ –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –†—É—á–Ω–æ–π –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚ùå –û–±–ª–∞—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

### Premium ($4.99/–º–µ—Å—è—Ü –∏–ª–∏ $39.99/–≥–æ–¥)
- ‚úÖ –ë–µ–∑–ª–∏–º–∏—Ç–Ω—ã–µ –∏–≥—Ä—ã
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ CSV/PDF
- ‚úÖ –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- ‚úÖ –û–±–ª–∞—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- StoreKit 2
- App Store Connect
- Receipt validation
- UserDefaults (–ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)

---

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

- [ ] –ü—Ä–æ–¥—É–∫—Ç—ã —Å–æ–∑–¥–∞–Ω—ã –≤ App Store Connect
- [ ] –ü–æ–∫—É–ø–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Sandbox
- [ ] Restore purchases —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –õ–∏–º–∏—Ç—ã free tier –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è
- [ ] Paywall UI –∫—Ä–∞—Å–∏–≤—ã–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π
- [ ] Backend –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç receipts
- [ ] –°—Ç–∞—Ç—É—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è

---

## –°–ª–µ–¥—É—é—â–∞—è —Ñ–∞–∑–∞

- **[Phase 5: –£–ª—É—á—à–µ–Ω–∏–µ UI/UX](../phase5/)**
