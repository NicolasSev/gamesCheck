# Phase 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∑–∞—è–≤–æ–∫ - –ò—Ç–æ–≥–∏

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö PlayerClaim
- ‚úÖ `PlayerClaim+CoreDataClass.swift` - –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–∏
- ‚úÖ `PlayerClaim+CoreDataProperties.swift` - —Å–≤–æ–π—Å—Ç–≤–∞ –∏ computed properties
- ‚ö†Ô∏è **–¢–†–ï–ë–£–ï–¢–°–Ø:** –î–æ–±–∞–≤–∏—Ç—å entity –≤ CoreData –º–æ–¥–µ–ª—å (—Å–º. COREDATA_PLAYERCLAIM_SETUP.md)

### 2. PlayerClaimService
- ‚úÖ `PlayerClaimService.swift` - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—è–≤–∫–∞–º–∏
- ‚úÖ –ú–µ—Ç–æ–¥—ã: submitClaim, approveClaim, rejectClaim, getMyClaims, getPendingClaimsForHost
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 3. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- ‚úÖ `ClaimPlayerView.swift` - –ø–æ–¥–∞—á–∞ –∑–∞—è–≤–∫–∏ –Ω–∞ –∏–≥—Ä–æ–∫–∞ –≤ –∏–≥—Ä–µ
- ‚úÖ `PendingClaimsView.swift` - —Å–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞—é—â–∏—Ö –∑–∞—è–≤–æ–∫ –¥–ª—è —Ö–æ—Å—Ç–∞
- ‚úÖ `ClaimDetailView.swift` - –¥–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ —Å –æ–¥–æ–±—Ä–µ–Ω–∏–µ–º/–æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ–º
- ‚úÖ `MyClaimsView.swift` - —Å–ø–∏—Å–æ–∫ –º–æ–∏—Ö –∑–∞—è–≤–æ–∫
- ‚úÖ `ClaimStatusView.swift` - —Å—Ç–∞—Ç—É—Å –∑–∞—è–≤–∫–∏ –≤ —Å–ø–∏—Å–∫–µ –∏–≥—Ä–æ–∫–æ–≤

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `GameDetailView` - –∫–Ω–æ–ø–∫–∞ "–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É"
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ `ProfileView` - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∫ –∑–∞—è–≤–∫–∞–º
- ‚úÖ –ú–µ—Ç–æ–¥—ã –≤ `Persistence.swift` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∑–∞—è–≤–∫–∞–º–∏

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é

### –®–∞–≥ 1: –î–æ–±–∞–≤–∏—Ç—å PlayerClaim entity –≤ CoreData

**–§–∞–π–ª:** `PokerCardRecognizer.xcdatamodeld` (–æ—Ç–∫—Ä—ã—Ç—å –≤ Xcode)

1. –û—Ç–∫—Ä–æ–π—Ç–µ `PokerCardRecognizer.xcdatamodeld` –≤ Xcode
2. –ù–∞–∂–º–∏—Ç–µ **+** –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π Entity
3. –ù–∞–∑–æ–≤–∏—Ç–µ: **PlayerClaim**
4. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ **Codegen:** Manual/None

**–ê—Ç—Ä–∏–±—É—Ç—ã:**
- `claimId` (UUID, NO)
- `playerName` (String, NO)
- `gameId` (UUID, NO)
- `gameWithPlayerObjectId` (String, NO)
- `claimantUserId` (UUID, NO)
- `hostUserId` (UUID, NO)
- `status` (String, NO, default: "pending")
- `createdAt` (Date, NO)
- `resolvedAt` (Date, YES)
- `resolvedByUserId` (UUID, YES)
- `notes` (String, YES)

**Relationships:**
- `claimantUser` ‚Üí User (To One, Nullify)
- `hostUser` ‚Üí User (To One, Nullify)
- `resolvedByUser` ‚Üí User (To One, Nullify)
- `game` ‚Üí Game (To One, Nullify)

**–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** –°–º. `docs/COREDATA_PLAYERCLAIM_SETUP.md`

---

## üéØ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –§–ª–æ—É –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–∫–∏:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∏–≥—Ä—É** (–Ω–µ —Ö–æ—Å—Ç)
2. –ù–∞–∂–∏–º–∞–µ—Ç **"–ü–æ–¥–∞—Ç—å –∑–∞—è–≤–∫—É"** –≤ GameDetailView
3. –í—ã–±–∏—Ä–∞–µ—Ç –∏–≥—Ä–æ–∫–∞ –∏–∑ —Å–ø–∏—Å–∫–∞ (ClaimPlayerView)
4. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∑–∞—è–≤–∫—É
5. –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "pending"

### –§–ª–æ—É –º–æ–¥–µ—Ä–∞—Ü–∏–∏:

1. **–•–æ—Å—Ç –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å**
2. –í–∏–¥–∏—Ç —Å—á–µ—Ç—á–∏–∫ "–û–∂–∏–¥–∞—é—â–∏–µ –∑–∞—è–≤–∫–∏" (–µ—Å–ª–∏ –µ—Å—Ç—å)
3. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç PendingClaimsView
4. –í–∏–¥–∏—Ç —Å–ø–∏—Å–æ–∫ –∑–∞—è–≤–æ–∫
5. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏ –∑–∞—è–≤–∫–∏ (ClaimDetailView)
6. –û–¥–æ–±—Ä—è–µ—Ç –∏–ª–∏ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞—è–≤–∫—É
7. –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏:
   - GameWithPlayer –ø—Ä–∏–≤—è–∑—ã–≤–∞–µ—Ç—Å—è –∫ PlayerProfile –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –°–æ–∑–¥–∞–µ—Ç—Å—è PlayerAlias –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è

### –§–ª–æ—É –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –º–æ–∏—Ö –∑–∞—è–≤–æ–∫:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª—å**
2. –ù–∞–∂–∏–º–∞–µ—Ç "–ú–æ–∏ –∑–∞—è–≤–∫–∏"
3. –í–∏–¥–∏—Ç –≤—Å–µ —Å–≤–æ–∏ –∑–∞—è–≤–∫–∏ —Å–æ —Å—Ç–∞—Ç—É—Å–∞–º–∏:
   - üü† –û–∂–∏–¥–∞–µ—Ç (pending)
   - üü¢ –û–¥–æ–±—Ä–µ–Ω–æ (approved)
   - üî¥ –û—Ç–∫–ª–æ–Ω–µ–Ω–æ (rejected)

---

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–ø–æ—Å–ª–µ CloudKit)

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CloudKit:
1. –û–±–Ω–æ–≤–∏—Ç—å PlayerClaimService –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å CloudKit
2. –î–æ–±–∞–≤–∏—Ç—å CloudKit subscriptions –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∑–∞—è–≤–æ–∫ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –°–µ–π—á–∞—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–∞—è (–±–µ–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏)
- –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ CloudKit –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ CloudKit –≤–µ—Ä—Å–∏—é
- –í—Å–µ –∑–∞—è–≤–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ CoreData
- –•–æ—Å—Ç –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ –æ–¥–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ (–ø–æ–∫–∞)

---

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–∏–µ–º–∫–∏

- [x] –ú–æ–¥–µ–ª—å PlayerClaim —Å–æ–∑–¥–∞–Ω–∞
- [x] PlayerClaimService —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [x] UI –¥–ª—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ —Å–æ–∑–¥–∞–Ω
- [x] UI –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∑–∞—è–≤–æ–∫ —Å–æ–∑–¥–∞–Ω
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ GameDetailView
- [x] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ProfileView
- [ ] Entity –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ CoreData –º–æ–¥–µ–ª—å (—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

**–°—Ç–∞—Ç—É—Å:** –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è entity –≤ CoreData

